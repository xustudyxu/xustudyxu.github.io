<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx 缓存集成 | xustudyxu&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e1aa9d15d62220ec692a843c08c79000";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>        
    </script>
    <script src="https://fastly.jsdelivr.net/npm/twikoo@1.5.11/dist/twikoo.all.min.js"></script>
    <script href="./js/index.js" async="async"></script>
    <link rel="icon" href="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/20220627/mmexport1656324824543.124zxwkqyzlc.webp">
    <script charset="utf-8" href="./js/main.js"></script>
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="一起学习编程!">
    <meta name="image" content="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.371wkgon7280.webp">
    <meta name="twitter:title" content="Nginx 缓存集成">
    <meta name="twitter:description" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.371wkgon7280.webp">
    <meta name="twitter:url" content="https://frxcat.fun/studynotes/middleware/Nginx/Nginx_Cache_integration.html">
    <meta name="twitter:site" content="@frxcat">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Nginx 缓存集成">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.371wkgon7280.webp">
    <meta property="og:url" content="https://frxcat.fun/studynotes/middleware/Nginx/Nginx_Cache_integration.html">
    <meta property="og:site_name" content="frxcat">
    <meta property="article:published_time" content="2022-08-05T16:02:32.000Z">
    <meta property="article:tag" content="Nginx">
    <meta itemprop="name" content="Nginx 缓存集成">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.371wkgon7280.webp">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="baidu-site-verification" content="code-5aMKYEt9fV">
    <link rel="preload" href="/assets/css/0.styles.83a33c40.css" as="style"><link rel="preload" href="/assets/js/app.4955f045.js" as="script"><link rel="preload" href="/assets/js/3.d7147f30.js" as="script"><link rel="preload" href="/assets/js/2.06384a8f.js" as="script"><link rel="preload" href="/assets/js/306.afe4b4d6.js" as="script"><link rel="preload" href="/assets/js/21.56563fe6.js" as="script"><link rel="preload" href="/assets/js/44.b2c4405b.js" as="script"><link rel="preload" href="/assets/js/26.0926361f.js" as="script"><link rel="preload" href="/assets/js/27.983951e8.js" as="script"><link rel="prefetch" href="/assets/js/1.824c4a45.js"><link rel="prefetch" href="/assets/js/10.7ce79a31.js"><link rel="prefetch" href="/assets/js/100.ffda3ba0.js"><link rel="prefetch" href="/assets/js/101.97f1f0f3.js"><link rel="prefetch" href="/assets/js/102.28121eb8.js"><link rel="prefetch" href="/assets/js/103.0fc5eb83.js"><link rel="prefetch" href="/assets/js/104.1787b574.js"><link rel="prefetch" href="/assets/js/105.ab685e88.js"><link rel="prefetch" href="/assets/js/106.1d957fb0.js"><link rel="prefetch" href="/assets/js/107.47afc3a8.js"><link rel="prefetch" href="/assets/js/108.84399f88.js"><link rel="prefetch" href="/assets/js/109.f5e928df.js"><link rel="prefetch" href="/assets/js/11.15750cc8.js"><link rel="prefetch" href="/assets/js/110.252b65e2.js"><link rel="prefetch" href="/assets/js/111.d46c182c.js"><link rel="prefetch" href="/assets/js/112.4a0c887f.js"><link rel="prefetch" href="/assets/js/113.d817adb9.js"><link rel="prefetch" href="/assets/js/114.08562ff1.js"><link rel="prefetch" href="/assets/js/115.5213c5f1.js"><link rel="prefetch" href="/assets/js/116.5eb73a0e.js"><link rel="prefetch" href="/assets/js/117.01a5c54f.js"><link rel="prefetch" href="/assets/js/118.66cb7195.js"><link rel="prefetch" href="/assets/js/119.69fa746e.js"><link rel="prefetch" href="/assets/js/12.f647df2d.js"><link rel="prefetch" href="/assets/js/120.7ffdbd83.js"><link rel="prefetch" href="/assets/js/121.6b4bf6ef.js"><link rel="prefetch" href="/assets/js/122.bc561cb0.js"><link rel="prefetch" href="/assets/js/123.f6dcec00.js"><link rel="prefetch" href="/assets/js/124.ac7e1df3.js"><link rel="prefetch" href="/assets/js/125.4c8061a6.js"><link rel="prefetch" href="/assets/js/126.c8188fec.js"><link rel="prefetch" href="/assets/js/127.1547a269.js"><link rel="prefetch" href="/assets/js/128.7a3a92aa.js"><link rel="prefetch" href="/assets/js/129.fb1eb93a.js"><link rel="prefetch" href="/assets/js/13.81d78335.js"><link rel="prefetch" href="/assets/js/130.9edcf9f4.js"><link rel="prefetch" href="/assets/js/131.63cc6713.js"><link rel="prefetch" href="/assets/js/132.901dac43.js"><link rel="prefetch" href="/assets/js/133.f50c7a04.js"><link rel="prefetch" href="/assets/js/134.45804187.js"><link rel="prefetch" href="/assets/js/135.c750606f.js"><link rel="prefetch" href="/assets/js/136.4a8abfca.js"><link rel="prefetch" href="/assets/js/137.6da75ee9.js"><link rel="prefetch" href="/assets/js/138.ea688bbe.js"><link rel="prefetch" href="/assets/js/139.9039e9b6.js"><link rel="prefetch" href="/assets/js/14.bb7261bd.js"><link rel="prefetch" href="/assets/js/140.e8263df3.js"><link rel="prefetch" href="/assets/js/141.bce8b10e.js"><link rel="prefetch" href="/assets/js/142.ae993908.js"><link rel="prefetch" href="/assets/js/143.71ee1b96.js"><link rel="prefetch" href="/assets/js/144.60372a7c.js"><link rel="prefetch" href="/assets/js/145.8c9a7820.js"><link rel="prefetch" href="/assets/js/146.c2d999f3.js"><link rel="prefetch" href="/assets/js/147.cb995273.js"><link rel="prefetch" href="/assets/js/148.3882a6c2.js"><link rel="prefetch" href="/assets/js/149.1f48b299.js"><link rel="prefetch" href="/assets/js/15.3ee4934a.js"><link rel="prefetch" href="/assets/js/150.598053fe.js"><link rel="prefetch" href="/assets/js/151.06610092.js"><link rel="prefetch" href="/assets/js/152.b066de39.js"><link rel="prefetch" href="/assets/js/153.a526a861.js"><link rel="prefetch" href="/assets/js/154.6f64be27.js"><link rel="prefetch" href="/assets/js/155.223d0952.js"><link rel="prefetch" href="/assets/js/156.5f726c38.js"><link rel="prefetch" href="/assets/js/157.05b11e1e.js"><link rel="prefetch" href="/assets/js/158.f2e6e770.js"><link rel="prefetch" href="/assets/js/159.f4fbb9d2.js"><link rel="prefetch" href="/assets/js/16.c8e6d991.js"><link rel="prefetch" href="/assets/js/160.8f69bfbe.js"><link rel="prefetch" href="/assets/js/161.eea8d9c0.js"><link rel="prefetch" href="/assets/js/162.93dc95d5.js"><link rel="prefetch" href="/assets/js/163.d7555ad5.js"><link rel="prefetch" href="/assets/js/164.d6e72bea.js"><link rel="prefetch" href="/assets/js/165.a9541677.js"><link rel="prefetch" href="/assets/js/166.2b05d4dc.js"><link rel="prefetch" href="/assets/js/167.aba2871d.js"><link rel="prefetch" href="/assets/js/168.56c921ae.js"><link rel="prefetch" href="/assets/js/169.1b57dfc6.js"><link rel="prefetch" href="/assets/js/17.848716f1.js"><link rel="prefetch" href="/assets/js/170.984fd8d3.js"><link rel="prefetch" href="/assets/js/171.29e05752.js"><link rel="prefetch" href="/assets/js/172.e6849365.js"><link rel="prefetch" href="/assets/js/173.df12d298.js"><link rel="prefetch" href="/assets/js/174.f59836af.js"><link rel="prefetch" href="/assets/js/175.decc0b18.js"><link rel="prefetch" href="/assets/js/176.fae02636.js"><link rel="prefetch" href="/assets/js/177.eec75463.js"><link rel="prefetch" href="/assets/js/178.0bdb6acd.js"><link rel="prefetch" href="/assets/js/179.33b2baaf.js"><link rel="prefetch" href="/assets/js/18.e137756f.js"><link rel="prefetch" href="/assets/js/180.59d4e8b9.js"><link rel="prefetch" href="/assets/js/181.8d0ce9f4.js"><link rel="prefetch" href="/assets/js/182.045c14cc.js"><link rel="prefetch" href="/assets/js/183.e5ebd77c.js"><link rel="prefetch" href="/assets/js/184.ebce314a.js"><link rel="prefetch" href="/assets/js/185.a8203b4c.js"><link rel="prefetch" href="/assets/js/186.cd8f98dd.js"><link rel="prefetch" href="/assets/js/187.dc6f333a.js"><link rel="prefetch" href="/assets/js/188.5bc7e99e.js"><link rel="prefetch" href="/assets/js/189.0a67b0cb.js"><link rel="prefetch" href="/assets/js/19.cf6d35cc.js"><link rel="prefetch" href="/assets/js/190.ff946d45.js"><link rel="prefetch" href="/assets/js/191.07d98970.js"><link rel="prefetch" href="/assets/js/192.652709ba.js"><link rel="prefetch" href="/assets/js/193.2b9d8522.js"><link rel="prefetch" href="/assets/js/194.5954a402.js"><link rel="prefetch" href="/assets/js/195.0db64242.js"><link rel="prefetch" href="/assets/js/196.8118b1aa.js"><link rel="prefetch" href="/assets/js/197.f1307687.js"><link rel="prefetch" href="/assets/js/198.833fa2b9.js"><link rel="prefetch" href="/assets/js/199.8b77b001.js"><link rel="prefetch" href="/assets/js/20.6d85a927.js"><link rel="prefetch" href="/assets/js/200.810bb855.js"><link rel="prefetch" href="/assets/js/201.6d65274f.js"><link rel="prefetch" href="/assets/js/202.a7dbdc7b.js"><link rel="prefetch" href="/assets/js/203.d640113f.js"><link rel="prefetch" href="/assets/js/204.46fe5b90.js"><link rel="prefetch" href="/assets/js/205.89d84b96.js"><link rel="prefetch" href="/assets/js/206.eaa7bacc.js"><link rel="prefetch" href="/assets/js/207.3a11edd3.js"><link rel="prefetch" href="/assets/js/208.ed338ec2.js"><link rel="prefetch" href="/assets/js/209.5a0a6d02.js"><link rel="prefetch" href="/assets/js/210.305cc09b.js"><link rel="prefetch" href="/assets/js/211.ef5c1e96.js"><link rel="prefetch" href="/assets/js/212.b2956a2d.js"><link rel="prefetch" href="/assets/js/213.bcb6e34b.js"><link rel="prefetch" href="/assets/js/214.ba065433.js"><link rel="prefetch" href="/assets/js/215.37fab5e9.js"><link rel="prefetch" href="/assets/js/216.99c87f39.js"><link rel="prefetch" href="/assets/js/217.527dec0c.js"><link rel="prefetch" href="/assets/js/218.a63e3816.js"><link rel="prefetch" href="/assets/js/219.2349d979.js"><link rel="prefetch" href="/assets/js/22.9c9e8d39.js"><link rel="prefetch" href="/assets/js/220.a6977d0f.js"><link rel="prefetch" href="/assets/js/221.79a88942.js"><link rel="prefetch" href="/assets/js/222.285ffff7.js"><link rel="prefetch" href="/assets/js/223.a1c6c3d9.js"><link rel="prefetch" href="/assets/js/224.0c47685a.js"><link rel="prefetch" href="/assets/js/225.a3d85065.js"><link rel="prefetch" href="/assets/js/226.7adcbd5c.js"><link rel="prefetch" href="/assets/js/227.f94ef1d7.js"><link rel="prefetch" href="/assets/js/228.cdea03df.js"><link rel="prefetch" href="/assets/js/229.ec699685.js"><link rel="prefetch" href="/assets/js/23.cdd23c67.js"><link rel="prefetch" href="/assets/js/230.76245f06.js"><link rel="prefetch" href="/assets/js/231.fe3ceeb6.js"><link rel="prefetch" href="/assets/js/232.90096e19.js"><link rel="prefetch" href="/assets/js/233.aad42634.js"><link rel="prefetch" href="/assets/js/234.ce6d7cb3.js"><link rel="prefetch" href="/assets/js/235.bea8a64e.js"><link rel="prefetch" href="/assets/js/236.66375c89.js"><link rel="prefetch" href="/assets/js/237.ee4706fa.js"><link rel="prefetch" href="/assets/js/238.2cb263a4.js"><link rel="prefetch" href="/assets/js/239.349c1fa8.js"><link rel="prefetch" href="/assets/js/24.d61c681d.js"><link rel="prefetch" href="/assets/js/240.106ba9a4.js"><link rel="prefetch" href="/assets/js/241.11632a0e.js"><link rel="prefetch" href="/assets/js/242.d1d145cb.js"><link rel="prefetch" href="/assets/js/243.52a3426f.js"><link rel="prefetch" href="/assets/js/244.2a584fa0.js"><link rel="prefetch" href="/assets/js/245.1fb29f3e.js"><link rel="prefetch" href="/assets/js/246.cd6a4ff6.js"><link rel="prefetch" href="/assets/js/247.7e962282.js"><link rel="prefetch" href="/assets/js/248.2c8794d2.js"><link rel="prefetch" href="/assets/js/249.15a9e798.js"><link rel="prefetch" href="/assets/js/25.0ae8f37e.js"><link rel="prefetch" href="/assets/js/250.9634ba4f.js"><link rel="prefetch" href="/assets/js/251.8dea9ef2.js"><link rel="prefetch" href="/assets/js/252.1ef90246.js"><link rel="prefetch" href="/assets/js/253.c760ad82.js"><link rel="prefetch" href="/assets/js/254.3a85d48c.js"><link rel="prefetch" href="/assets/js/255.c4d5320f.js"><link rel="prefetch" href="/assets/js/256.fbd5919e.js"><link rel="prefetch" href="/assets/js/257.34697e2d.js"><link rel="prefetch" href="/assets/js/258.f9cd5316.js"><link rel="prefetch" href="/assets/js/259.4cede2ec.js"><link rel="prefetch" href="/assets/js/260.50019bf0.js"><link rel="prefetch" href="/assets/js/261.a73b8ea9.js"><link rel="prefetch" href="/assets/js/262.14c31152.js"><link rel="prefetch" href="/assets/js/263.c000bca2.js"><link rel="prefetch" href="/assets/js/264.b8107f16.js"><link rel="prefetch" href="/assets/js/265.85b6b9c1.js"><link rel="prefetch" href="/assets/js/266.694d2f3e.js"><link rel="prefetch" href="/assets/js/267.f116f2e0.js"><link rel="prefetch" href="/assets/js/268.9c97144d.js"><link rel="prefetch" href="/assets/js/269.6fbc62ea.js"><link rel="prefetch" href="/assets/js/270.369846d8.js"><link rel="prefetch" href="/assets/js/271.67b12e6c.js"><link rel="prefetch" href="/assets/js/272.bba3ff96.js"><link rel="prefetch" href="/assets/js/273.13c95743.js"><link rel="prefetch" href="/assets/js/274.2e6e23ae.js"><link rel="prefetch" href="/assets/js/275.ef9864fc.js"><link rel="prefetch" href="/assets/js/276.1144051f.js"><link rel="prefetch" href="/assets/js/277.adf536ed.js"><link rel="prefetch" href="/assets/js/278.3bf25b0f.js"><link rel="prefetch" href="/assets/js/279.aefbd210.js"><link rel="prefetch" href="/assets/js/28.5e8136a7.js"><link rel="prefetch" href="/assets/js/280.28af2ae4.js"><link rel="prefetch" href="/assets/js/281.b82a267a.js"><link rel="prefetch" href="/assets/js/282.8b8c2aef.js"><link rel="prefetch" href="/assets/js/283.6cc25af1.js"><link rel="prefetch" href="/assets/js/284.f6c919b2.js"><link rel="prefetch" href="/assets/js/285.c8b37f1f.js"><link rel="prefetch" href="/assets/js/286.cc62881c.js"><link rel="prefetch" href="/assets/js/287.63bdf0a3.js"><link rel="prefetch" href="/assets/js/288.eff5e5d1.js"><link rel="prefetch" href="/assets/js/289.3495ef91.js"><link rel="prefetch" href="/assets/js/29.589632c5.js"><link rel="prefetch" href="/assets/js/290.3c4e85c5.js"><link rel="prefetch" href="/assets/js/291.4aa17898.js"><link rel="prefetch" href="/assets/js/292.aa916882.js"><link rel="prefetch" href="/assets/js/293.dd76f349.js"><link rel="prefetch" href="/assets/js/294.48d6b678.js"><link rel="prefetch" href="/assets/js/295.b64b3a61.js"><link rel="prefetch" href="/assets/js/296.d42756b8.js"><link rel="prefetch" href="/assets/js/297.adaa2635.js"><link rel="prefetch" href="/assets/js/298.ddce93c6.js"><link rel="prefetch" href="/assets/js/299.f6c6d0d6.js"><link rel="prefetch" href="/assets/js/30.92b97c4a.js"><link rel="prefetch" href="/assets/js/300.9d2314c1.js"><link rel="prefetch" href="/assets/js/301.63785cf2.js"><link rel="prefetch" href="/assets/js/302.6567a551.js"><link rel="prefetch" href="/assets/js/303.4a773a3a.js"><link rel="prefetch" href="/assets/js/304.e7578acd.js"><link rel="prefetch" href="/assets/js/305.d7264241.js"><link rel="prefetch" href="/assets/js/307.3ecd4181.js"><link rel="prefetch" href="/assets/js/308.75abb4ef.js"><link rel="prefetch" href="/assets/js/309.1899459a.js"><link rel="prefetch" href="/assets/js/31.a196a6b1.js"><link rel="prefetch" href="/assets/js/310.2c3ce99b.js"><link rel="prefetch" href="/assets/js/311.e2751a92.js"><link rel="prefetch" href="/assets/js/312.8d781795.js"><link rel="prefetch" href="/assets/js/313.61965c0b.js"><link rel="prefetch" href="/assets/js/314.3f22d2ce.js"><link rel="prefetch" href="/assets/js/315.29850d1c.js"><link rel="prefetch" href="/assets/js/316.28146e65.js"><link rel="prefetch" href="/assets/js/317.911d6c0d.js"><link rel="prefetch" href="/assets/js/318.a6bb8468.js"><link rel="prefetch" href="/assets/js/319.817b65e4.js"><link rel="prefetch" href="/assets/js/32.e0e28974.js"><link rel="prefetch" href="/assets/js/320.a13c22db.js"><link rel="prefetch" href="/assets/js/321.b0012692.js"><link rel="prefetch" href="/assets/js/322.51b22673.js"><link rel="prefetch" href="/assets/js/323.72b5467a.js"><link rel="prefetch" href="/assets/js/324.a3302f6d.js"><link rel="prefetch" href="/assets/js/325.4b932c3b.js"><link rel="prefetch" href="/assets/js/326.373319d8.js"><link rel="prefetch" href="/assets/js/327.4d773aaa.js"><link rel="prefetch" href="/assets/js/328.418bc74e.js"><link rel="prefetch" href="/assets/js/329.d38edfe8.js"><link rel="prefetch" href="/assets/js/33.327fd4ae.js"><link rel="prefetch" href="/assets/js/330.2990ca24.js"><link rel="prefetch" href="/assets/js/331.d021965b.js"><link rel="prefetch" href="/assets/js/332.71803827.js"><link rel="prefetch" href="/assets/js/333.ffbc52af.js"><link rel="prefetch" href="/assets/js/334.3df0f3d2.js"><link rel="prefetch" href="/assets/js/335.1dae2dca.js"><link rel="prefetch" href="/assets/js/336.882628f3.js"><link rel="prefetch" href="/assets/js/337.2acbad9c.js"><link rel="prefetch" href="/assets/js/338.7a66ed6c.js"><link rel="prefetch" href="/assets/js/339.c7810f9e.js"><link rel="prefetch" href="/assets/js/34.b2df595d.js"><link rel="prefetch" href="/assets/js/340.319a77f0.js"><link rel="prefetch" href="/assets/js/341.175cff3d.js"><link rel="prefetch" href="/assets/js/342.2f68554e.js"><link rel="prefetch" href="/assets/js/343.cbada1ae.js"><link rel="prefetch" href="/assets/js/344.7070f981.js"><link rel="prefetch" href="/assets/js/345.aa9ee343.js"><link rel="prefetch" href="/assets/js/346.7e28e169.js"><link rel="prefetch" href="/assets/js/347.1acc3094.js"><link rel="prefetch" href="/assets/js/348.880928ff.js"><link rel="prefetch" href="/assets/js/349.c589d35e.js"><link rel="prefetch" href="/assets/js/35.615ee69e.js"><link rel="prefetch" href="/assets/js/350.0b5d9734.js"><link rel="prefetch" href="/assets/js/351.2d9435b0.js"><link rel="prefetch" href="/assets/js/352.45e29852.js"><link rel="prefetch" href="/assets/js/353.bda6d8ca.js"><link rel="prefetch" href="/assets/js/354.583c41db.js"><link rel="prefetch" href="/assets/js/355.7c88e775.js"><link rel="prefetch" href="/assets/js/356.b7b5efc6.js"><link rel="prefetch" href="/assets/js/357.4ba46471.js"><link rel="prefetch" href="/assets/js/358.6488c5be.js"><link rel="prefetch" href="/assets/js/359.5a9a928c.js"><link rel="prefetch" href="/assets/js/36.77eeb092.js"><link rel="prefetch" href="/assets/js/360.6b9b662d.js"><link rel="prefetch" href="/assets/js/361.d8a02c7d.js"><link rel="prefetch" href="/assets/js/362.755c280d.js"><link rel="prefetch" href="/assets/js/363.6f70be34.js"><link rel="prefetch" href="/assets/js/364.340fb301.js"><link rel="prefetch" href="/assets/js/365.ed71cce4.js"><link rel="prefetch" href="/assets/js/366.11918e35.js"><link rel="prefetch" href="/assets/js/367.105c96e7.js"><link rel="prefetch" href="/assets/js/368.64b38b88.js"><link rel="prefetch" href="/assets/js/369.08891dd8.js"><link rel="prefetch" href="/assets/js/37.440a91a5.js"><link rel="prefetch" href="/assets/js/370.a510b044.js"><link rel="prefetch" href="/assets/js/371.0fbc30dd.js"><link rel="prefetch" href="/assets/js/38.9f8083e5.js"><link rel="prefetch" href="/assets/js/39.c1961004.js"><link rel="prefetch" href="/assets/js/4.62debd28.js"><link rel="prefetch" href="/assets/js/40.fcdae8fa.js"><link rel="prefetch" href="/assets/js/41.29538f39.js"><link rel="prefetch" href="/assets/js/42.c16ad366.js"><link rel="prefetch" href="/assets/js/43.d16f5e49.js"><link rel="prefetch" href="/assets/js/45.978b35cc.js"><link rel="prefetch" href="/assets/js/46.4c017598.js"><link rel="prefetch" href="/assets/js/47.0eaddaef.js"><link rel="prefetch" href="/assets/js/48.8d699a53.js"><link rel="prefetch" href="/assets/js/49.96ea0379.js"><link rel="prefetch" href="/assets/js/5.f4847a38.js"><link rel="prefetch" href="/assets/js/50.9b54f522.js"><link rel="prefetch" href="/assets/js/51.a7472af4.js"><link rel="prefetch" href="/assets/js/52.bf4b068b.js"><link rel="prefetch" href="/assets/js/53.25f480b7.js"><link rel="prefetch" href="/assets/js/54.21d88e0f.js"><link rel="prefetch" href="/assets/js/55.c8d25d39.js"><link rel="prefetch" href="/assets/js/56.9c58c82c.js"><link rel="prefetch" href="/assets/js/57.da4bebf0.js"><link rel="prefetch" href="/assets/js/58.63d26e3a.js"><link rel="prefetch" href="/assets/js/59.2531f3bb.js"><link rel="prefetch" href="/assets/js/6.a52887f1.js"><link rel="prefetch" href="/assets/js/60.328b3a09.js"><link rel="prefetch" href="/assets/js/61.13224792.js"><link rel="prefetch" href="/assets/js/62.728ee957.js"><link rel="prefetch" href="/assets/js/63.7c73b7c7.js"><link rel="prefetch" href="/assets/js/64.c76e79e3.js"><link rel="prefetch" href="/assets/js/65.43c44fad.js"><link rel="prefetch" href="/assets/js/66.bde30c80.js"><link rel="prefetch" href="/assets/js/67.ff492882.js"><link rel="prefetch" href="/assets/js/68.a35057cc.js"><link rel="prefetch" href="/assets/js/69.6382854e.js"><link rel="prefetch" href="/assets/js/70.89864f1b.js"><link rel="prefetch" href="/assets/js/71.280c76dd.js"><link rel="prefetch" href="/assets/js/72.eb100e80.js"><link rel="prefetch" href="/assets/js/73.903c8992.js"><link rel="prefetch" href="/assets/js/74.12b843af.js"><link rel="prefetch" href="/assets/js/75.31486792.js"><link rel="prefetch" href="/assets/js/76.0c2178c7.js"><link rel="prefetch" href="/assets/js/77.6306f7ef.js"><link rel="prefetch" href="/assets/js/78.92cce2a0.js"><link rel="prefetch" href="/assets/js/79.a0684f2d.js"><link rel="prefetch" href="/assets/js/80.6e23d835.js"><link rel="prefetch" href="/assets/js/81.282b545c.js"><link rel="prefetch" href="/assets/js/82.1a25ddb3.js"><link rel="prefetch" href="/assets/js/83.179f61a7.js"><link rel="prefetch" href="/assets/js/84.3e3b5f31.js"><link rel="prefetch" href="/assets/js/85.ce53a54c.js"><link rel="prefetch" href="/assets/js/86.98b8bb37.js"><link rel="prefetch" href="/assets/js/87.9acb7104.js"><link rel="prefetch" href="/assets/js/88.4ac2a1b0.js"><link rel="prefetch" href="/assets/js/89.3dfd5b1d.js"><link rel="prefetch" href="/assets/js/9.72067b46.js"><link rel="prefetch" href="/assets/js/90.05d2c34c.js"><link rel="prefetch" href="/assets/js/91.389badd5.js"><link rel="prefetch" href="/assets/js/92.07ef2869.js"><link rel="prefetch" href="/assets/js/93.c8044225.js"><link rel="prefetch" href="/assets/js/94.6597f744.js"><link rel="prefetch" href="/assets/js/95.47db06ad.js"><link rel="prefetch" href="/assets/js/96.cd4e53e7.js"><link rel="prefetch" href="/assets/js/97.621d6cc9.js"><link rel="prefetch" href="/assets/js/98.425d9618.js"><link rel="prefetch" href="/assets/js/99.d9003496.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.65779e7a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.83a33c40.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">xustudyxu's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页​</a></div><div class="nav-item"><a href="/pages/f6054a/" class="nav-link">导航🚀​</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机核心" class="dropdown-title"><!----> <span class="title" style="display:;">计算机核心</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/db72cf/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/pages/39e2a1/" class="nav-link">计算机网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e05ef5/" class="nav-link">JavaSE</a></li></ul></li><li class="dropdown-item"><h4>JavaWeb</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5cda88/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/cea341/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/d893c0/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/pages/6f762f/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/8f83ba/" class="nav-link">Servlet</a></li><li class="dropdown-subitem"><a href="/pages/8bc1c4/" class="nav-link">MVC</a></li><li class="dropdown-subitem"><a href="/pages/f883e2/" class="nav-link">filter|listener</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><!----> <span class="title" style="display:;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/462a90/" class="nav-link">Spring5</a></li><li class="dropdown-item"><!----> <a href="/pages/2e990c/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/pages/0d4af0/" class="nav-link">SpringBoot2</a></li><li class="dropdown-item"><!----> <a href="/pages/870083/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/66babb/" class="nav-link">SpringSecurity</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/596552/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>消息队列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e645d9/" class="nav-link">RabbitMQ</a></li></ul></li><li class="dropdown-item"><h4>服务器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9551ee/" class="nav-link">Nginx🌐</a></li></ul></li><li class="dropdown-item"><h4>服务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/48771f/" class="nav-link">Dubbo</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9268d/" class="nav-link">Python基础</a></li><li class="dropdown-subitem"><a href="/pages/e0bd06/" class="nav-link">数据分析</a></li></ul></li><li class="dropdown-item"><h4>环境搭建</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/600247/" class="nav-link">Hadoop集群</a></li><li class="dropdown-subitem"><a href="/pages/cdeb68/" class="nav-link">KVM虚拟化技术</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e72480/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7ab056/" class="nav-link">NoSQL数据库概论</a></li><li class="dropdown-subitem"><a href="/pages/e9cc9f/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/91197c/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/pages/2aae92/" class="nav-link">HBase</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0e424f/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/pages/e0594a/" class="nav-link">MyBatis-Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><!----> <span class="title" style="display:;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/99e9dc/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/90cc29/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/45eca1/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/pages/34892c/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><!----> <span class="title" style="display:;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/eab19d/" class="nav-link">十大排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/40ee62/" class="nav-link">力扣算法题</a></li><li class="dropdown-item"><!----> <a href="/pages/39558d/" class="nav-link">初级开发篇</a></li><li class="dropdown-item"><!----> <a href="/pages/47c622/" class="nav-link">中高进阶篇</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/myfriends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/pages/bba350/" class="nav-link">优秀博客文章</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="本站" class="dropdown-title"><!----> <span class="title" style="display:;">本站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9013e4/" class="nav-link">关于</a></li></ul></li></ul></div></div> <a href="https://github.com/xustudyxu/xustudyxu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/20220627/mmexport1656324824543.124zxwkqyzlc.webp"> <div class="blogger-info"><h3>xustudyxu</h3> <span>一起学习编程!</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页​</a></div><div class="nav-item"><a href="/pages/f6054a/" class="nav-link">导航🚀​</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机核心" class="dropdown-title"><!----> <span class="title" style="display:;">计算机核心</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/db72cf/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/pages/39e2a1/" class="nav-link">计算机网络</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e05ef5/" class="nav-link">JavaSE</a></li></ul></li><li class="dropdown-item"><h4>JavaWeb</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5cda88/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/cea341/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/d893c0/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/pages/6f762f/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/8f83ba/" class="nav-link">Servlet</a></li><li class="dropdown-subitem"><a href="/pages/8bc1c4/" class="nav-link">MVC</a></li><li class="dropdown-subitem"><a href="/pages/f883e2/" class="nav-link">filter|listener</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><!----> <span class="title" style="display:;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/462a90/" class="nav-link">Spring5</a></li><li class="dropdown-item"><!----> <a href="/pages/2e990c/" class="nav-link">SpringMVC</a></li><li class="dropdown-item"><!----> <a href="/pages/0d4af0/" class="nav-link">SpringBoot2</a></li><li class="dropdown-item"><!----> <a href="/pages/870083/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/66babb/" class="nav-link">SpringSecurity</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>搜索引擎</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/596552/" class="nav-link">ElasticSearch</a></li></ul></li><li class="dropdown-item"><h4>消息队列</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e645d9/" class="nav-link">RabbitMQ</a></li></ul></li><li class="dropdown-item"><h4>服务器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9551ee/" class="nav-link">Nginx🌐</a></li></ul></li><li class="dropdown-item"><h4>服务框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/48771f/" class="nav-link">Dubbo</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="大数据" class="dropdown-title"><!----> <span class="title" style="display:;">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b9268d/" class="nav-link">Python基础</a></li><li class="dropdown-subitem"><a href="/pages/e0bd06/" class="nav-link">数据分析</a></li></ul></li><li class="dropdown-item"><h4>环境搭建</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/600247/" class="nav-link">Hadoop集群</a></li><li class="dropdown-subitem"><a href="/pages/cdeb68/" class="nav-link">KVM虚拟化技术</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e72480/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7ab056/" class="nav-link">NoSQL数据库概论</a></li><li class="dropdown-subitem"><a href="/pages/e9cc9f/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/pages/91197c/" class="nav-link">MongoDB</a></li><li class="dropdown-subitem"><a href="/pages/2aae92/" class="nav-link">HBase</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/0e424f/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/pages/e0594a/" class="nav-link">MyBatis-Plus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><!----> <span class="title" style="display:;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/99e9dc/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/90cc29/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/45eca1/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/pages/34892c/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><!----> <span class="title" style="display:;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/eab19d/" class="nav-link">十大排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/40ee62/" class="nav-link">力扣算法题</a></li><li class="dropdown-item"><!----> <a href="/pages/39558d/" class="nav-link">初级开发篇</a></li><li class="dropdown-item"><!----> <a href="/pages/47c622/" class="nav-link">中高进阶篇</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/myfriends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/pages/bba350/" class="nav-link">优秀博客文章</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="本站" class="dropdown-title"><!----> <span class="title" style="display:;">本站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/9013e4/" class="nav-link">关于</a></li></ul></li></ul></div></div> <a href="https://github.com/xustudyxu/xustudyxu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>搜索引擎-ElasticSearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/596552/" class="sidebar-link">ElasticSearch 概述</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_install/" class="sidebar-link">ElasticSearch 安装</a></li><li><a href="/middleware/ElasticSearch/basic_operation/" class="sidebar-link">ElasticSearch 基本操作</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Advanced_operation/" class="sidebar-link">ElasticSearch  高级操作</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Java/" class="sidebar-link">ElasticSearch Java整合</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_buildcluster/" class="sidebar-link">ElasticSearch 集群搭建</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Gainian/" class="sidebar-link">ElasticSearch 进阶</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Distributed_clusterAndRouting_calculation/" class="sidebar-link">ElasticSearch 分布式集群和路由计算</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Slice_control_process/" class="sidebar-link">ElasticSearch 分片控制流程</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Slicing_operation_principle/" class="sidebar-link">ElasticSearch 分片操作原理</a></li><li><a href="/pages/c6a02d/" class="sidebar-link">ElasticSearch 多种分析器</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Conflict_problem_handling/" class="sidebar-link">ElasticSearch 冲突问题处理</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Framework_integration/" class="sidebar-link">ElasticSearch 多框架集成</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_optimization/" class="sidebar-link">ElasticSearch 进阶优化</a></li><li><a href="/middleware/ElasticSearch/ElasticSearch_Interview_questions/" class="sidebar-link">ElasticSearch 面试题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>消息队列-RabbitMQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e645d9/" class="sidebar-link">MQ的相关概念</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_introduct/" class="sidebar-link">RabbitMQ 介绍</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_install/" class="sidebar-link">RabbitMQ 安装</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_index/" class="sidebar-link">RabbitMQ 入门案例</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Message_responseAndrelease/" class="sidebar-link">RabbitMQ 消息应答与发布</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Exchanges/" class="sidebar-link">RabbitMQ 交换机</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Dead_QUEUE/" class="sidebar-link">RabbitMQ 死信队列</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Delay_queue/" class="sidebar-link">RabbitMQ 延迟队列</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Release_confirmation_advanced/" class="sidebar-link">RabbitMQ 发布确认高级</a></li><li><a href="/middleware/RabbitMQ/RabbitMQ_Other_knowledge_points/" class="sidebar-link">RabbitMQ 其他知识点</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>服务器-Nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9551ee/" class="sidebar-link">Nginx 介绍</a></li><li><a href="/middleware/Nginx/Nginx_install/" class="sidebar-link">Nginx 安装</a></li><li><a href="/middleware/Nginx/Nginx_Base_Use/" class="sidebar-link">Nginx 基本使用</a></li><li><a href="/middleware/Nginx/Nginx_Configuration_file/" class="sidebar-link">Nginx 核心配置文件</a></li><li><a href="/middleware/Nginx/Nginx_Basic_case_configuration/" class="sidebar-link">Nginx 基础配置实例</a></li><li><a href="/middleware/Nginx/Nginx_Static_resource_deployment/" class="sidebar-link">Nginx 静态资源部署</a></li><li><a href="/middleware/Nginx/NginxStatic_resource_access/" class="sidebar-link">Nginx 静态资源访问</a></li><li><a href="/middleware/Nginx/Nginx_Reverse_proxy/" class="sidebar-link">Nginx 反向代理</a></li><li><a href="/middleware/Nginx/Nginx_load_balancing/" class="sidebar-link">Nginx 负载均衡</a></li><li><a href="/middleware/Nginx/Nginx_Cache_integration/" aria-current="page" class="active sidebar-link">Nginx 缓存集成</a></li><li><a href="/middleware/Nginx/Nginx_Deployment_and_cluster/" class="sidebar-link">Nginx 部署与集群</a></li><li><a href="/middleware/Nginx/Nginx_Site_and_certification/" class="sidebar-link">Nginx 站点与认证</a></li><li><a href="/middleware/Nginx/Nginx_Lua_learn/" class="sidebar-link">Nginx Lua学习</a></li><li><a href="/middleware/Nginx/Nginx_Lua_Expansion_module/" class="sidebar-link">Nginx Lua扩展模块</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>服务框架-Dubbo</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/48771f/" class="sidebar-link">Dubbo 概述</a></li><li><a href="/middleware/Dubbo/Dubbo_Geting_start/" class="sidebar-link">Dubbo 快速入门</a></li><li><a href="/middleware/Dubbo/Dubbo_Advanced_features/" class="sidebar-link">Dubbo 高级特性</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=studynotes" title="分类" data-v-06225672>studynotes</a></li><li data-v-06225672><a href="/categories/?category=middleware" title="分类" data-v-06225672>middleware</a></li><li data-v-06225672><a href="/categories/?category=Nginx" title="分类" data-v-06225672>Nginx</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>xu</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-05</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Nginx 缓存集成<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="nginx-缓存集成"><a href="#nginx-缓存集成" class="header-anchor">#</a> Nginx 缓存集成</h1> <p></p><div class="table-of-contents"><ul><li><a href="#缓存的概念">缓存的概念</a></li><li><a href="#web缓存服务">Web缓存服务</a></li><li><a href="#缓存设置相关指令">缓存设置相关指令</a><ul><li><a href="#proxy-cache-path">proxycachepath</a></li><li><a href="#proxy-cache">proxy_cache</a></li><li><a href="#proxy-cache-key">proxycachekey</a></li><li><a href="#proxy-cache-valid">proxycachevalid</a></li><li><a href="#proxy-cache-min-uses">proxycachemin_uses</a></li><li><a href="#proxy-cache-methods">proxycachemethods</a></li></ul></li><li><a href="#缓存设置案例">缓存设置案例</a><ul><li><a href="#需求分析">需求分析</a></li><li><a href="#步骤实现">步骤实现</a></li></ul></li><li><a href="#缓存的删除">缓存的删除</a><ul><li><a href="#删除缓存目录">删除缓存目录</a></li><li><a href="#ngx-cache-purge删除">ngxcachepurge删除</a></li></ul></li><li><a href="#资源不缓存">资源不缓存</a><ul><li><a href="#proxy-no-cache">proxynocache</a></li><li><a href="#proxy-cache-bypass">proxycachebypass</a></li><li><a href="#常用不缓存变量">常用不缓存变量</a></li><li><a href="#案例模板">案例模板</a></li></ul></li></ul></div><p></p> <h2 id="缓存的概念"><a href="#缓存的概念" class="header-anchor">#</a> 缓存的概念</h2> <p>缓存就是数据交换的缓冲区（称作：Cache），当用户要获取数据的时候，会先从缓存中去查询获取数据，如果缓存中有就会直接返回给用户，如果缓存中没有，则会发请求从服务器重新查询数据，将数据返回给用户的同时将数据放入缓存，下次用户就会直接从缓存中获取数据。</p> <p><img src="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.371wkgon7280.webp" alt="image"></p> <p>缓存其实在很多场景中都有用到，比如：</p> <table><thead><tr><th>场景</th> <th>作用</th></tr></thead> <tbody><tr><td>操作系统磁盘缓存</td> <td>减少磁盘机械操作</td></tr> <tr><td>数据库缓存</td> <td>减少文件系统的IO操作</td></tr> <tr><td>应用程序缓存</td> <td>减少对数据库的查询</td></tr> <tr><td>Web 服务器缓存</td> <td>减少对应用服务器请求次数</td></tr> <tr><td>浏览器缓存</td> <td>减少与后台的交互次数</td></tr></tbody></table> <p>缓存的优点</p> <ul><li>减少数据传输，节省网络流量，加快响应速度，提升用户体验</li> <li>减轻服务器压力</li> <li>提供服务端的高可用性</li></ul> <p>缓存的缺点</p> <ul><li>数据的不一致</li> <li>增加成本</li></ul> <p><img src="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.2itt4ge9erq0.webp" alt="image"></p> <p>在 <a href="/middleware/Nginx/Nginx_Static_resource_deployment/#静态资源缓存配置">静态资源部署 - 缓存配置</a> 的时候，我们学习了如何在浏览器进行缓存，而本内容学习的是 Nginx。</p> <p>Nginx 作为 Web 服务器，Nginx 作为 Web 缓存服务器，它介于客户端和应用服务器之间，当用户通过浏览器访问一个 URL 时，Web 缓存服务器会去应用服务器获取要展示给用户的内容，将内容缓存到自己的服务器上，当下一次请求到来时，如果访问的是同一个 URL，Web 缓存服务器就会直接将之前缓存的内容返回给客户端，而不是向应用服务器再次发送请求。Web 缓存降低了应用服务器、数据库的负载，减少了网络延迟，提高了用户访问的响应速度，增强了用户的体验。</p> <h2 id="web缓存服务"><a href="#web缓存服务" class="header-anchor">#</a> Web缓存服务</h2> <p>Nginx 是从 0.7.48 版开始提供缓存功能。Nginx 是基于 Proxy Store 来实现的，<strong>其原理是把 URL 及相关组合当做 Key，在使用 MD5 算法对 Key 进行哈希化，得到硬盘上对应的哈希目录路径，从而将缓存内容保存在该目录中</strong>。它可以支持任意 URL 连接，同时也支持 404/301/302 这样的非200 状态码。Nginx 即可以支持对指定 URL 或者状态码设置过期时间，也可以使用 purge 命令来手动清除指定 URL 的缓存。</p> <p><img src="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.5rf186zoffg0.webp" alt="image"></p> <h2 id="缓存设置相关指令"><a href="#缓存设置相关指令" class="header-anchor">#</a> 缓存设置相关指令</h2> <p>Nginx 的 Web 缓存服务主要是使用 <code>ngx_http_proxy_module</code> 模块相关指令集来完成，接下来我们把常用的指令来进行介绍下。</p> <p><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html" target="_blank" rel="noopener noreferrer">ngx_http_proxy_module 文档地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="proxy-cache-path"><a href="#proxy-cache-path" class="header-anchor">#</a> proxy_cache_path</h3> <p>该指定用于设置缓存文件的存放路径。</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_cache_path &lt;path&gt; [levels=number]<br> &lt;keys_zone=zone_name:zone_size&gt; [inactive=time][max_size=size];</td> <td>—</td> <td>http</td></tr></tbody></table> <p><code>path</code>：缓存路径地址，如：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>/usr/local/proxy_cache
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>levels</code>: 指定该缓存空间 <code>path</code> 基础上新建的目录，最多可以设置 3 层，每层取 1 到 2 个字母作为目录名，格式为：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>levels=num:num:num   <span class="token comment"># 三个 num 代表三层，每层目录名分别取 num 个字母</span>
levels=num:num       <span class="token comment"># 两个 num 代表两层，每层目录名分别取 num 个字母</span>
levels=num           <span class="token comment"># 一个 num 代表一层，每层目录名分别取 num 个字母</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>levels=1:2   <span class="token comment"># 缓存空间有两层目录，第一层目录名取 1 个字母，第二层目录名取 2 个字母</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>字母名从 MD5 加密的值后面往前截取。</p> <p>举例说明：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token comment"># 假设 proxy_cache_key 为 kele，通过 MD5 加密以后的值为 27ce47ea65c1381dbe5175f7c77d8a3a</span>
levels=1:2    <span class="token comment"># 最终的存储路径为 /usr/local/proxy_cache/a/a3，每层截取个数根据 1:2</span>
levels=2:1:2  <span class="token comment"># 最终的存储路径为 /usr/local/proxy_cache/3a/a/d8，每层截取个数根据 2:1:2</span>
levels=2:2:2  <span class="token comment"># 最终的存储路径为 /usr/local/proxy_cache/3a/8a/7d，每层截取个数根据 2:2:2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>还不理解吗？存储路径在 <code>path</code> 目录基础上再创建新的目录，新的目录名从加密后的值的后面往前面截取。</p> <p><code>keys_zone</code>：用来为这个缓存区设置名称和指定大小，如：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>keys_zone=kele:200m  <span class="token comment"># 缓存区的名称是 kele，大小为 200M，1M 大概能存储 8000 个 keys</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>inactive</code>：指定的时间内未访问的缓存数据会从缓存中删除，默认情况下，<code>inactive</code> 设置为 10 分钟。如：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>inactive=1d   <span class="token comment"># 缓存数据在 1 天内没有被访问就会被删除</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>max_size</code>：设置最大缓存空间，如果缓存空间存满，默认会覆盖缓存时间最长的资源，默认单位为兆。如：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code>max_size=20g    <span class="token comment"># 最大缓存空间为 20G</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置实例:</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">proxy_cache_path</span> /usr/local/proxy_cache keys_zone=kele:200m levels=1:2:1 inactive=1d max_size=20g</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>此时重启 Nginx 配置文件，发现 <code>/usr/local</code> 目录里多出一个目录，名字叫做 proxy_cache。</p> <h3 id="proxy-cache"><a href="#proxy-cache" class="header-anchor">#</a> proxy_cache</h3> <p>该指令用来开启或关闭代理缓存，如果是开启则自定使用哪个缓存区来进行缓存。默认关闭。</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_cache &lt;zone_name | off&gt;;</td> <td>proxy_cache off;</td> <td>http、server、location</td></tr></tbody></table> <p>zone_name：指定使用缓存区的名称。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>缓存区的名称必须是 <code>proxy_cache_path</code> 里的 <code>keys_zone</code> 生成的缓存名。</p></div> <h3 id="proxy-cache-key"><a href="#proxy-cache-key" class="header-anchor">#</a> proxy_cache_key</h3> <p>该指令用来设置 Web 缓存的 key 值，Nginx 会根据 key 值利用 MD5 计算处哈希值并缓存起来，作为缓存目录名的参考。</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_cache_key &lt;key&gt;;</td> <td>proxy_cache_key <mjx-container jax="SVG" class="MathJax"><svg xmlns="http://www.w3.org/2000/svg" width="7.439ex" height="1.595ex" viewBox="0 -694 3288 705" style="vertical-align:-0.025ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="73" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(469, 0)"><path data-c="63" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(902, 0)"><path data-c="68" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path></g><g data-mml-node="mi" transform="translate(1478, 0)"><path data-c="65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(1944, 0)"><path data-c="6D" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(2822, 0)"><path data-c="65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g></g></g></svg></mjx-container>proxy_host$request_uri;</td> <td>http、server、location</td></tr></tbody></table> <p>如 kele 由 MD5 计算出来是 27ce47ea65c1381dbe5175f7c77d8a3a</p> <p>在哪计算出来的？ 前往 <a href="https://md5jiami.bmcx.com/" target="_blank" rel="noopener noreferrer">MD5 在线加密网站<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="proxy-cache-valid"><a href="#proxy-cache-valid" class="header-anchor">#</a> proxy_cache_valid</h3> <p>该指令用来对不同返回状态码的 URL 设置不同的缓存时间。</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_cache_valid [code ...... ] &lt;time&gt;;</td> <td>—</td> <td>http、server、location</td></tr></tbody></table> <p>如：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_cache_valid</span> <span class="token number">200</span> <span class="token number">302</span> <span class="token number">10m</span></span><span class="token punctuation">;</span> <span class="token comment"># 为 200 和 302 的响应 URL 设置 10 分钟缓存时间</span>
<span class="token directive"><span class="token keyword">proxy_cache_valid</span> <span class="token number">404</span> <span class="token number">1m</span></span><span class="token punctuation">;</span>      <span class="token comment"># 为 404 的响应 URL 设置 1 分钟缓存时间</span>
<span class="token directive"><span class="token keyword">proxy_cache_valid</span> any <span class="token number">1m</span></span><span class="token punctuation">;</span>      <span class="token comment"># 对所有响应状态码的URL都设置 1 分钟缓存时间</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="proxy-cache-min-uses"><a href="#proxy-cache-min-uses" class="header-anchor">#</a> proxy_cache_min_uses</h3> <p>该指令用来设置资源被访问多少次后才会被缓存。默认是 1 次。</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_cache_min_uses &lt;number&gt;;</td> <td>proxy_cache_min_uses 1;</td> <td>http、server、location</td></tr></tbody></table> <h3 id="proxy-cache-methods"><a href="#proxy-cache-methods" class="header-anchor">#</a> proxy_cache_methods</h3> <p>该指令是设置缓存哪些 HTTP 方法的请求资源。</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_cache_methods &lt;GET | HEAD | POST&gt;;</td> <td>proxy_cache_methods GET HEAD;</td> <td>http、server、location</td></tr></tbody></table> <p>默认缓存 HTTP 的 GET 和 HEAD 方法的请求资源，不缓存 POST 方法的请求资源。</p> <h2 id="缓存设置案例"><a href="#缓存设置案例" class="header-anchor">#</a> 缓存设置案例</h2> <h3 id="需求分析"><a href="#需求分析" class="header-anchor">#</a> 需求分析</h3> <p><img src="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.4ye8ddxwbng0.webp" alt="image"></p> <h3 id="步骤实现"><a href="#步骤实现" class="header-anchor">#</a> 步骤实现</h3> <p><strong>应用服务器的环境准备</strong></p> <ol><li><p>在 <code>192.168.200.146</code> 服务器 A 上的 tomcat 的 webapps 下面添加一个 js 目录，并在 js 目录中添加一个 jquery.js 文件</p></li> <li><p>启动 tomcat</p></li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /usr/local/tomcat/bin
./startup.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li>访问服务器 A 进行测试</li></ol> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//192.168.200.146:8080/js/jquery.js</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Nginx 的环境准备</strong></p> <ol><li>准备服务器 B 完成 Nginx 的反向代理配置</li></ol> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span><span class="token punctuation">{</span>
	<span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">server</span> 192.168.200.146:8080</span><span class="token punctuation">;</span>   <span class="token comment"># 服务器 A 地址</span>
	<span class="token punctuation">}</span>
	<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
		<span class="token directive"><span class="token keyword">listen</span>       <span class="token number">8080</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        	<span class="token directive"><span class="token keyword">proxy_pass</span> http://backend/js/</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="2"><li>完成 Nginx 缓存配置</li></ol> <p>:::: tabs cache-lifetime=&quot;5&quot; :options=&quot;{ useUrlFragment: false }&quot;</p> <p>::: tab 有注释版</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span><span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_cache_path</span> /usr/local/proxy_cache levels=2:1 keys_zone=bing:200m inactive=1d max_size=20g</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:8080</span><span class="token punctuation">;</span>   <span class="token comment"># 服务器 A 的地址</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">8080</span></span><span class="token punctuation">;</span>     			<span class="token comment"># 监听 8080 端口</span>
        <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span> 		<span class="token comment"># 监听 localhost 的IP</span>
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>					<span class="token comment"># 监听包含 / 的请求</span>
            <span class="token directive"><span class="token keyword">proxy_cache</span> bing</span><span class="token punctuation">;</span>    		<span class="token comment"># 开启 bing 缓存区，和第 2 行的 keys_zone 对应</span>
            <span class="token directive"><span class="token keyword">proxy_cache_key</span> kele</span><span class="token punctuation">;</span>  		<span class="token comment"># 缓存的 key 值，会被 MD5 解析成字符串用于生成缓存的目录</span>
            <span class="token directive"><span class="token keyword">proxy_cache_min_uses</span> <span class="token number">5</span></span><span class="token punctuation">;</span> 	<span class="token comment"># 资源被访问 5 次后才会被缓存</span>
            <span class="token directive"><span class="token keyword">proxy_cache_valid</span> <span class="token number">200</span> <span class="token number">5d</span></span><span class="token punctuation">;</span>	<span class="token comment"># 为 200 响应 URL 设置 5 天缓存时间</span>
            <span class="token directive"><span class="token keyword">proxy_cache_valid</span> <span class="token number">404</span> <span class="token number">30s</span></span><span class="token punctuation">;</span>  <span class="token comment"># 为 404 的响应 URL 设置 30 秒缓存时间</span>
            <span class="token directive"><span class="token keyword">proxy_cache_valid</span> any <span class="token number">1m</span></span><span class="token punctuation">;</span>	<span class="token comment"># 为除了上方的任意响应 URL 设置 1 分钟缓存时间</span>
            <span class="token directive"><span class="token keyword">add_header</span> nginx-cache <span class="token string">&quot;<span class="token variable">$upstream_cache_status</span>&quot;</span></span><span class="token punctuation">;</span>  <span class="token comment"># 将缓存的状态放到请求头里</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend/js/</span><span class="token punctuation">;</span>  <span class="token comment"># 代理 backend，将 /js/ 追加到 backend 模块里的地址后面</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>:::</p> <p>::: tab 无注释版</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">http</span></span><span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_cache_path</span> /usr/local/proxy_cache levels=2:1 keys_zone=bing:200m inactive=1d max_size=20g</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">upstream</span> backend</span><span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">server</span> 192.168.200.146:8080</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">8080</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">server_name</span>  localhost</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">proxy_cache</span> bing</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_cache_key</span> kele</span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_cache_min_uses</span> <span class="token number">5</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_cache_valid</span> <span class="token number">200</span> <span class="token number">5d</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_cache_valid</span> <span class="token number">404</span> <span class="token number">30s</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_cache_valid</span> any <span class="token number">1m</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">add_header</span> nginx-cache <span class="token string">&quot;<span class="token variable">$upstream_cache_status</span>&quot;</span></span><span class="token punctuation">;</span>
            <span class="token directive"><span class="token keyword">proxy_pass</span> http://backend/js/</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>:::</p> <p>::::</p> <ol start="3"><li>测试是否缓存成功</li></ol> <p>利用 <code>$upstream_cache_status</code> 的值在控制台(F12)查看是否缓存。</p> <p>第一次访问 <code>192.168.200.113:8080/jquery.js</code>，如图：</p> <p><img src="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.3p1azxp6cdy0.webp" alt="image"></p> <p>因为第一次访问时，正在缓存，所以返回的请求头 MISS 是没有缓存成功。</p> <p>第二次访问 <code>192.168.200.113:8080/jquery.js</code>，如图：</p> <p><img src="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.73w7kaxo8r00.webp" alt="image"></p> <p>HIT 代表成功缓存。</p> <ol start="4"><li>测试 404 缓存时间</li></ol> <p>测试 404 缓存时间，我们访问 <code>192.168.200.113:8080/jquery.js111</code>，它会返回 404 页面，并缓存 404 页面，当我们立即访问正确的 <code>192.168.200.113:8080/jquery.js</code>，它依然返回 404 页面，因为 <code>/jquery.js</code> 请求目前被缓存为 404，还没到 30 秒过期，等 30 秒后再访问，就成功了。</p> <h2 id="缓存的删除"><a href="#缓存的删除" class="header-anchor">#</a> 缓存的删除</h2> <p>这里介绍两种方式：</p> <ul><li>删除对应的缓存目录</li> <li>使用第三方扩展模块</li></ul> <h3 id="删除缓存目录"><a href="#删除缓存目录" class="header-anchor">#</a> 删除缓存目录</h3> <p>假设缓存目录是 <code>/usr/local/proxy_cache/</code></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> /usr/local/proxy_cache/<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果想删除某个缓存目录，就在后面加上目录名。如果想删除整个缓存目录，直接删除 <code>/usr/local/proxy_cache/</code> 即可。</p> <h3 id="ngx-cache-purge删除"><a href="#ngx-cache-purge删除" class="header-anchor">#</a> ngx_cache_purge删除</h3> <p>使用第三方扩展模块 <code>ngx_cache_purge</code> 进行删除缓存。</p> <ol><li><p>下载 <code>ngx_cache_purge</code> 模块对应的资源包，并上传到服务器的 <code>/root/nginx/module/</code> 目录下。</p> <p>这里的资源包是 ngx_cache_purge-2.3.tar.gz</p></li> <li><p>对资源文件进行解压缩</p></li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">tar</span> <span class="token parameter variable">-zxf</span> ngx_cache_purge-2.3.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>修改文件夹名称为 <code>purge</code>，方便后期配置</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">mv</span> ngx_cache_purge-2.3 purge
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>查询 Nginx 的配置参数 <code>configure arguments</code>，并拷贝出来</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>nginx <span class="token parameter variable">-V</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>进入 Nginx 的安装包目录，使用 ./configure 进行参数配置，记得加上 <code>nginx -V</code> 查询出来的 <code>configure arguments</code> 参数</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./configure --add-module<span class="token operator">=</span>/root/nginx/module/purge  <span class="token comment"># 加上之前的 configure arguments 参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="6"><li>使用 make 进行编译</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">make</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="7"><li>将 Nginx 安装目录的 nginx 二级制可执行文件备份</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">mv</span> /usr/local/nginx/sbin/nginx /usr/local/nginx/sbin/nginx.backup
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="8"><li>将编译后的 objs 中的 nginx 拷贝到 nginx 的 sbin 目录下</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">cp</span> objs/nginx /usr/local/nginx/sbin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="9"><li>使用 <code>make upgrade</code> 进行升级，记得在安装包目录下执行</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> /opt/nginx/core/nginx-1.20.2
<span class="token function">make</span> upgrade
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="10"><li>在 Nginx 配置文件中进行如下配置</li></ol> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span><span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">location</span> ~/purge(/.*)</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">proxy_cache_purge</span> bing kele</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>proxy_cache_purge</code> 指令</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_cache_purge &lt;cache&gt; &lt;key&gt;</td> <td>-</td> <td>http、server、location</td></tr></tbody></table> <ul><li><code>cache</code> 是 <code>proxy_cache</code>，详细内容看 <a href="https://notes.youngkbt.cn/nginx/cache-integration/#proxy-cache" target="_blank" rel="noopener noreferrer">proxy_cache<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>key</code> 是 <code>proxy_cache_key</code>，详细内容看 <a href="https://notes.youngkbt.cn/nginx/cache-integration/#proxy-cache-key" target="_blank" rel="noopener noreferrer">proxy_cache_key<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="资源不缓存"><a href="#资源不缓存" class="header-anchor">#</a> 资源不缓存</h2> <p>前面咱们已经完成了 Nginx 作为 Web 缓存服务器的使用。但是我们得思考一个问题，<strong>不是所有的数据都适合进行缓存</strong>。比如说对于一些经常发生变化的数据。如果进行缓存的话，就很容易出现用户访问到的数据不是服务器真实的数据。所以对于这些资源我们在缓存的过程中就需要进行过滤，不进行缓存。</p> <p>Nginx 也提供了这块的功能设置，需要使用到如下两个指令：</p> <ul><li>proxy_no_cache</li> <li>proxy_cache_bypass</li></ul> <h3 id="proxy-no-cache"><a href="#proxy-no-cache" class="header-anchor">#</a> proxy_no_cache</h3> <p>该指令是用来定义不将数据进行缓存的条件，也就是不缓存指定的数据。</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_no_cache &lt;string&gt; ...... ;</td> <td>—</td> <td>http、server、location</td></tr></tbody></table> <p>可设置多个 string。</p> <p>配置实例：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_no_cache</span> <span class="token variable">$cookie_nocache</span> <span class="token variable">$arg_nocache</span> <span class="token variable">$arg_comment</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="proxy-cache-bypass"><a href="#proxy-cache-bypass" class="header-anchor">#</a> proxy_cache_bypass</h3> <p>该指令是用来设置不从缓存中获取数据的条件，也就是虽然缓存了指定的资源，但请求过来也不会去获取它，而是去服务器里获取资源。</p> <table><thead><tr><th>语法</th> <th>默认值</th> <th>位置</th></tr></thead> <tbody><tr><td>proxy_cache_bypass &lt;string&gt; ...... ;</td> <td>—</td> <td>http、server、location</td></tr></tbody></table> <p>可设置多个 string。</p> <p>配置实例：</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_cache_bypass</span> <span class="token variable">$cookie_nocache</span> <span class="token variable">$arg_nocache</span> <span class="token variable">$arg_comment</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上述两个指令都有一个指定的条件，这个条件可以是多个，<strong>并且多个条件中至少有一个不为空且不等于「0」，则条件满足成立。</strong></p> <p>上面给的配置实例是从官方网站获取的，里面使用到了三个变量，分别是 <code>$cookie_nocache</code>、<code>$arg_nocache</code>、<code>$arg_comment</code></p> <h3 id="常用不缓存变量"><a href="#常用不缓存变量" class="header-anchor">#</a> 常用不缓存变量</h3> <p>常用不缓存的三个变量分别为：</p> <ul><li><code>$cookie_nocache</code></li> <li><code>$arg_nocache</code></li> <li><code>$arg_comment</code></li></ul> <p>这三个变量分别代表的含义是:</p> <ul><li><code>$cookie_nocache</code>：指的是当前请求的 cookie 中 key 为 nocache 的 value 值</li> <li><code>$arg_nocache</code> 和 <code>$arg_comment</code>：指的是当前请求的参数中属性名为 nocache 和 comment 对应的属性值</li></ul> <p>案例演示:</p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">log_format</span> params <span class="token variable">$cookie_nocache</span> | <span class="token variable">$arg_nocache</span> | <span class="token variable">$arg_comment；</span>
server</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>	<span class="token number">8081</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">access_log</span> logs/access_params.log params</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> Set-Cookie <span class="token string">'nocache=888'</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">root</span> html</span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>访问 <code>192.168.200.133:8081?nocache=999&amp;comment=777</code>，然后去日志查看结果，如图所示：</p> <p><img src="https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220805/image.695kmtpob840.webp" alt="image"></p> <p>以后访问的某一个资源如果不想缓存，在 URL 后面加入三个变量中的任意一个或多个即可，只要它们不为空或 0。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>这三个变量推荐作为不缓存资源的条件，但并不是只能作为不缓存资源的条件。</p></div> <h3 id="案例模板"><a href="#案例模板" class="header-anchor">#</a> 案例模板</h3> <p>设置不缓存资源的配置方案模板：</p> <ul><li>如果访问的是 js 文件，则不会缓存该 js 文件</li> <li>如果 <code>$nocache</code> <code>$cookie_nocache</code> <code>$arg_nocache</code> <code>$arg_comment</code> 任意不为空或 0，则访问的资源不进行缓存</li></ul> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span>	<span class="token number">8080</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> localhost</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$request_uri</span> ~ /.*\.js$)</span><span class="token punctuation">{</span>
            <span class="token directive"><span class="token keyword">set</span> <span class="token variable">$nocache</span> <span class="token number">1</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token directive"><span class="token keyword">proxy_no_cache</span> <span class="token variable">$nocache</span> <span class="token variable">$cookie_nocache</span> <span class="token variable">$arg_nocache</span> <span class="token variable">$arg_comment</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">proxy_cache_bypass</span> <span class="token variable">$nocache</span> <span class="token variable">$cookie_nocache</span> <span class="token variable">$arg_nocache</span> <span class="token variable">$arg_comment</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>为什么不会缓存 js 文件呢，看第 5 - 6 行代码。如果访问的文件是 js 文件，则设置 <code>$nocache</code> 为 1，只要它不为 0，则触发第 8 行代码，<code>proxy_no_cache</code> 后面的参数只要有一个不为空或 0，则访问的资源不进行缓存。</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/xustudyxu/xustudyxu.github.io/edit/master/docs/studynotes/middleware/Nginx/Nginx_Cache_integration.md" target="_blank" rel="noopener noreferrer">帮助我改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Nginx" title="标签">#Nginx</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025年5月18日</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/middleware/Nginx/Nginx_load_balancing/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Nginx 负载均衡</div></a> <a href="/middleware/Nginx/Nginx_Deployment_and_cluster/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Nginx 部署与集群</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/middleware/Nginx/Nginx_load_balancing/" class="prev">Nginx 负载均衡</a></span> <span class="next"><a href="/middleware/Nginx/Nginx_Deployment_and_cluster/">Nginx 部署与集群</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c538d4/"><div>
            结构型模式
            <!----></div></a> <span class="date">03-21</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/9f3d5d/"><div>
            创建者模式
            <!----></div></a> <span class="date">01-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/57297b/"><div>
            设计模式入门
            <!----></div></a> <span class="date">12-30</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1812903531@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xustudyxu" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://frxcat.fun/img/wx.png" title="微信" target="_blank" class="iconfont icon-weixin"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2025
    <span>xustudyxu |<a href="https://beian.miit.gov.cn" target="_blank">豫ICP备2022008983号</a><br>	<img src="http://www.beian.gov.cn/img/new/gongan.png" border="0" /></a>	 		<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41018302000331" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px;">豫公网安备 41018302000331号</p></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div><div></div><div id="tcomment"></div><!----></div></div>
    <script src="/assets/js/app.4955f045.js" defer></script><script src="/assets/js/3.d7147f30.js" defer></script><script src="/assets/js/2.06384a8f.js" defer></script><script src="/assets/js/306.afe4b4d6.js" defer></script><script src="/assets/js/21.56563fe6.js" defer></script><script src="/assets/js/44.b2c4405b.js" defer></script><script src="/assets/js/26.0926361f.js" defer></script><script src="/assets/js/27.983951e8.js" defer></script>
  </body>
</html>
