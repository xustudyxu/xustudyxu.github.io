(window.webpackJsonp=window.webpackJsonp||[]).push([[222],{572:function(s,t,a){"use strict";a.r(t);var e=a(10),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"hbase数据操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hbase数据操作"}},[s._v("#")]),s._v(" HBase数据操作")]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#put"}},[s._v("put")])]),t("li",[t("a",{attrs:{href:"#delete"}},[s._v("delete")])]),t("li",[t("a",{attrs:{href:"#数据查询"}},[s._v("数据查询")]),t("ul",[t("li",[t("a",{attrs:{href:"#get"}},[s._v("get")])]),t("li",[t("a",{attrs:{href:"#scan"}},[s._v("scan")])])])]),t("li",[t("a",{attrs:{href:"#数据统计"}},[s._v("数据统计")])])])]),t("p"),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/HBase/images/05/01.png",alt:"01"}})]),s._v(" "),t("h2",{attrs:{id:"put"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#put"}},[s._v("#")]),s._v(" put")]),s._v(" "),t("ul",[t("li",[s._v("语法")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("put  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'表名'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'行键'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'列族:列限定符'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'单元格值'")]),s._v(",时间戳\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("描述\n"),t("ul",[t("li",[s._v("必须指定表名、行键、列族、列限定符")]),s._v(" "),t("li",[s._v("列族必须是已经创建的，否则HBase会报错")]),s._v(" "),t("li",[s._v("列名是临时定义的，所以列族里的列是可以随意扩展的")]),s._v(" "),t("li",[s._v("时间戳是可选参数，如不设置，则系统会自动插入当前时间为时间戳")]),s._v(" "),t("li",[s._v("参数区分大小写，字符串使用单引号")]),s._v(" "),t("li",[s._v("只能插入单个数据")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/HBase/images/05/02.png",alt:"02"}})]),s._v(" "),t("ul",[t("li",[s._v("描述:如果指定的单元格已经存在，则put操作为更新数据；\n"),t("ul",[t("li",[s._v("单元格会保存指定VERSIONS=>n的多个版本数据")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/HBase/images/05/03.png",alt:"03"}})]),s._v(" "),t("h2",{attrs:{id:"delete"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delete"}},[s._v("#")]),s._v(" delete")]),s._v(" "),t("ul",[t("li",[s._v("语法")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("delete  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'表名'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'行键'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'列族<:列限定符>'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("时间戳"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("描述：必须指定表名、行键和列族，列限定符和时间戳是可选参数；")]),s._v(" "),t("ul",[t("li",[s._v("delete最小删除粒度为单元格，且不能跨列族删除")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/HBase/images/05/04.png",alt:"04"}})]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("delete操作并不会马上删除数据，只是将对应的数据打上删除标记，只有在数据产生合并时，数据才会被删除。")])]),s._v(" "),t("h2",{attrs:{id:"数据查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据查询"}},[s._v("#")]),s._v(" 数据查询")]),s._v(" "),t("h3",{attrs:{id:"get"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#get"}},[s._v("#")]),s._v(" get")]),s._v(" "),t("ul",[t("li",[s._v("语法")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("get  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'表名'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'行键'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'列族:列限定符'")]),s._v(",时间戳"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("get 'student','001'")]),s._v(" "),t("p",[s._v("get 'student','001',{COLUMN=>'Grades'}")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/HBase/images/05/05.png",alt:"05"}})]),s._v(" "),t("blockquote",[t("p",[s._v("get 'student','001' ,{COLUMN=>'Grades',TIMERANGE => [1,2]}")]),s._v(" "),t("p",[s._v("get 'student','001' ,{COLUMN=>'StuInfo',VERSIONS=>2}")])]),s._v(" "),t("blockquote",[t("p",[s._v("hbase(main):020:0> put 'student', '001', 'StuInfo:Name','jim green',2")]),s._v(" "),t("p",[s._v("0 row(s) in 0.0140 seconds")]),s._v(" "),t("p",[s._v("hbase(main):021:0> put 'student', '001', 'StuInfo:Name','jerry',3")]),s._v(" "),t("p",[s._v("0 row(s) in 0.0140 seconds")]),s._v(" "),t("p",[s._v("hbase(main):022:0> put 'student', '001', 'StuInfo:Name','curry',4")]),s._v(" "),t("p",[s._v("0 row(s) in 0.0690 seconds")]),s._v(" "),t("p",[s._v("hbase(main):023:0> get 'student','001',{COLUMN => 'StuInfo',VERSIONS => 2}")]),s._v(" "),t("p",[s._v("COLUMN                                        CELL")]),s._v(" "),t("p",[s._v("StuInfo:Age                                  timestamp=1541039335956, value=18")]),s._v(" "),t("p",[s._v("StuInfo:Name                              timestamp=4, value=curry")]),s._v(" "),t("p",[s._v("StuInfo:Name                              timestamp=3, value=jerry")]),s._v(" "),t("p",[s._v("StuInfo:Sex                                   timestamp=1541039336280, value=Male")]),s._v(" "),t("p",[s._v("4 row(s) in 0.0240 seconds")])]),s._v(" "),t("h3",{attrs:{id:"scan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scan"}},[s._v("#")]),s._v(" scan")]),s._v(" "),t("ul",[t("li",[s._v("语法")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("scan  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'表名'")]),s._v(","),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'列族:列限定符'")]),s._v(",时间戳"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",[t("li",[s._v("扫描全表:scan '表名'")]),s._v(" "),t("li",[s._v("指定列族名称:")])]),s._v(" "),t("blockquote",[t("p",[s._v("scan 'student', "),t("strong",[s._v("{COLUMN=>")]),s._v("'stuinfo'"),t("strong",[s._v("}")])])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("指定列族和列的名称")])]),s._v(" "),t("blockquote",[t("p",[s._v("scan 'student', "),t("strong",[s._v("{COLUMN=>")]),s._v("'stuInfo:Name'"),t("strong",[s._v("}")])])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("指定输出行数")])]),s._v(" "),t("blockquote",[t("p",[s._v("scan 'student',  "),t("strong",[s._v("{LIMIT => "),t("strong",[s._v("1")]),s._v("}")])])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v("指定输出行键范围")])]),s._v(" "),t("blockquote",[t("p",[s._v("scan 'student', "),t("strong",[s._v("{STARTROW =>")]),s._v("'001',"),t("strong",[s._v("ENDROW =>")]),s._v(" '003'"),t("strong",[s._v("}")])])]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[s._v("指定组合条件查询")])]),s._v(" "),t("blockquote",[t("p",[s._v("scan 'student', "),t("strong",[s._v("{COLUMN=>")]),s._v("'stuinfo',"),t("strong",[s._v("STARTROW =>")]),s._v("'001',"),t("strong",[s._v("ENDROW =>")]),s._v(" '002'"),t("strong",[s._v("}")])])]),s._v(" "),t("h2",{attrs:{id:"数据统计"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据统计"}},[s._v("#")]),s._v(" 数据统计")]),s._v(" "),t("ul",[t("li",[s._v("语法")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("count  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'表名'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("hbase(main):004:0> count ‘student’")]),s._v(" "),t("p",[s._v("3 row(s) in 0.0440 seconds")])]),s._v(" "),t("p",[s._v("在关系型数据库中，有多少条记录就有多少行，表中的行数很容易统计。而在 HBase 里，计算逻辑行需要扫描全表的内容，重复的行键是不纳入计数的，且标记为删除的数据也不纳入计数。")]),s._v(" "),t("p",[s._v("执行 count 命令其实是一个开销较大的进程，特别是应用在大数据场景时，可能需要持续很长时间，因此，用户一般会结合 Hadoop 的 MapReduce 架构来进行分布式的扫描计数。")])])}),[],!1,null,null,null);t.default=n.exports}}]);