(window.webpackJsonp=window.webpackJsonp||[]).push([[332],{689:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker-数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-数据卷"}},[s._v("#")]),s._v(" Docker 数据卷")]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#什么是数据卷"}},[s._v("什么是数据卷")])]),a("li",[a("a",{attrs:{href:"#为什么使用数据卷"}},[s._v("为什么使用数据卷")])]),a("li",[a("a",{attrs:{href:"#数据卷挂载操作"}},[s._v("数据卷挂载操作")]),a("ul",[a("li",[a("a",{attrs:{href:"#具体目录挂载"}},[s._v("具体目录挂载")])]),a("li",[a("a",{attrs:{href:"#默认目录挂载"}},[s._v("默认目录挂载")])]),a("li",[a("a",{attrs:{href:"#匿名目录挂载"}},[s._v("匿名目录挂载")])]),a("li",[a("a",{attrs:{href:"#哪个挂载方法好"}},[s._v("哪个挂载方法好？")])]),a("li",[a("a",{attrs:{href:"#读写权限"}},[s._v("读写权限")])])])]),a("li",[a("a",{attrs:{href:"#数据卷操作命令"}},[s._v("数据卷操作命令")]),a("ul",[a("li",[a("a",{attrs:{href:"#数据卷命令"}},[s._v("数据卷命令")])]),a("li",[a("a",{attrs:{href:"#数据卷查看"}},[s._v("数据卷查看")])]),a("li",[a("a",{attrs:{href:"#数据卷信息"}},[s._v("数据卷信息")])]),a("li",[a("a",{attrs:{href:"#数据卷创建"}},[s._v("数据卷创建")])]),a("li",[a("a",{attrs:{href:"#数据卷删除"}},[s._v("数据卷删除")])])])]),a("li",[a("a",{attrs:{href:"#数据卷容器"}},[s._v("数据卷容器")]),a("ul",[a("li",[a("a",{attrs:{href:"#继承"}},[s._v("继承")])]),a("li",[a("a",{attrs:{href:"#数据共享"}},[s._v("数据共享")])]),a("li",[a("a",{attrs:{href:"#数据备份"}},[s._v("数据备份")])]),a("li",[a("a",{attrs:{href:"#数据恢复"}},[s._v("数据恢复")])])])]),a("li",[a("a",{attrs:{href:"#挂载特性"}},[s._v("挂载特性")])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"什么是数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是数据卷"}},[s._v("#")]),s._v(" 什么是数据卷")]),s._v(" "),a("p",[a("strong",[s._v("数据卷")]),s._v(" 是一个可供一个或多个容器使用的特殊目录，它绕过 UFS，可以提供很多有用的特性:")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("数据卷")]),s._v(" 可以在容器之间共享和享用")]),s._v(" "),a("li",[s._v("对 "),a("strong",[s._v("数据卷")]),s._v(" 的修改立马生效")]),s._v(" "),a("li",[s._v("对 "),a("strong",[s._v("数据卷")]),s._v(" 的更新，不会影响镜像")]),s._v(" "),a("li",[a("strong",[s._v("数据卷")]),s._v(" 默认会一直存在，即时容器被删除")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[a("strong",[s._v("数据卷")]),s._v(" 的使用，类似于 Linux 下对目录或者文件进行 mount，镜像中的被指定为挂载点的目录中的文件会复制到数据卷（仅数据卷为空时复制）")])]),s._v(" "),a("h2",{attrs:{id:"为什么使用数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用数据卷"}},[s._v("#")]),s._v(" 为什么使用数据卷")]),s._v(" "),a("ul",[a("li",[s._v("当创建一个容器的时候，容器运行，数据能不能持久化")]),s._v(" "),a("li",[s._v("如果能够持久化，数据存储在哪？由于 docker 是隔离的，数据能不能存储在容器外")]),s._v(" "),a("li",[s._v("如果部署很多容器，每次都需要进入容器中进行配置嘛？能不能外部进行配置")])]),s._v(" "),a("p",[s._v("docker 数据卷呈现给 docker 容器的一个形式就是目录，该目录支持多个容器间共享，修改不会影响到镜像。使用 Docker 的数据卷，类似在系统中使用 mount 挂载一个文件系统。")]),s._v(" "),a("h2",{attrs:{id:"数据卷挂载操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷挂载操作"}},[s._v("#")]),s._v(" 数据卷挂载操作")]),s._v(" "),a("p",[s._v("三种挂载数据卷格式")]),s._v(" "),a("ul",[a("li",[s._v("具体目录挂载："),a("code",[s._v("docker run [options] -v <宿主机绝对路径:容器内的路径[:ro | rw]> <镜像名>")])]),s._v(" "),a("li",[s._v("默认目录挂载："),a("code",[s._v("docker run [options] -v <任意别名:容器内的路径[:ro | rw]> <镜像名>")])]),s._v(" "),a("li",[s._v("匿名目录挂载："),a("code",[s._v("docker run [options] -v <容器内的路径[:ro | rw]> <镜像名>")])])]),s._v(" "),a("p",[s._v("默认目录挂载和匿名目录挂载的目录默认在 "),a("code",[s._v("/var/lib/docker/volumes/")]),s._v(" 目录下。")]),s._v(" "),a("p",[s._v("宿主机挂载目录里，都会生成 "),a("code",[s._v("_data")]),s._v(" 目录，该目录存放容器挂载目录下的数据。")]),s._v(" "),a("h3",{attrs:{id:"具体目录挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具体目录挂载"}},[s._v("#")]),s._v(" 具体目录挂载")]),s._v(" "),a("p",[s._v("自定义数据卷目录。")]),s._v(" "),a("p",[s._v("在用 docker run 命令的时候，使用 -v 标记来创建一个数据卷并挂载到容器里。")]),s._v(" "),a("p",[s._v("格式："),a("code",[s._v("docker run [options] -v <宿主机绝对路径 | 任意别名:容器内的路径[:ro | rw]> <镜像名>")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("宿主机绝对路径 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 任意别名:容器内的路径:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":ro "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("镜像名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("宿主机路径必须是绝对路径，如果目录不存在 Docker 会自动为你创建它。")])]),s._v(" "),a("p",[a("code",[s._v("ro")]),s._v("：代表 read-only，容器的路径只允许读，不允许写。不影响宿主机的路径可读可写")]),s._v(" "),a("p",[a("code",[s._v("rw")]),s._v("：默认值，代表可读可写")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 1：具名挂载")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v(":8080 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat02 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/aa:/usr/local/tomcat/webapps tomcat:8.5.73\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("特点：宿主机的的挂载目录内容覆盖到容器的挂载目录内容")])]),s._v(" "),a("p",[s._v("因为 /opt/aa 目录为空，所以容器的 webapps 目录被 aa 目录覆盖，也为空。")]),s._v(" "),a("p",[a("strong",[s._v("验证是否成功挂载")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE                                COMMAND                  CREATED             STATUS              PORTS                    NAMES\n3302e930a1a8        tomcat:8.5.27                        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" seconds ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v(" seconds       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8081-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat02\n749c02466301        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".91.166:5000/zzyyubuntu:1.2   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days ago          Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days                                    pedantic_gagarin\nad5ee6156b1c        registry                             "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh /etc…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days ago          Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:5000-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp   competent_meninsky\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看挂载信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" inspect 3302e930a1a8\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220918/image.4qmas1zt8z20.webp",alt:"image"}})]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 2：测试容器和宿主机之间数据共享")])])]),s._v(" "),a("p",[s._v("在 tomcat02 容器里创建 test.txt 文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 tomcat02 容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat02 bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器挂载目录")]),s._v("\nroot@3302e930a1a8:/usr/local/tomcat"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd webapps/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 test.txt 文件")]),s._v("\nroot@3302e930a1a8:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch text.txt")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否创建成功")]),s._v("\nroot@3302e930a1a8:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntext.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("在宿主机查看文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 宿主机挂载目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /opt/aa")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntext.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("说明挂载成功，双方挂载的目录实现共享。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 3：容器停止运行，宿主机添加 test2.txt，再启动容器，文件是否同步到容器里？")])])]),s._v(" "),a("p",[s._v("宿主机添加 test2.txt")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 宿主机挂载目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /opt/aa")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 test2.txt 文件 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch text2.txt")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntext2.txt  text.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("启动 tomcat02 容器，查看挂载目录是否有 test2.txt")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 tomcat02 容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker start tomcat02")]),s._v("\ntomcat02\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 tomcat02 容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat02 bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器挂载目录")]),s._v("\nroot@3302e930a1a8:/usr/local/tomcat"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd webapps/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件")]),s._v("\nroot@3302e930a1a8:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntext.txt  text2.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("说明数据依旧同步")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 4：删除容器")])])]),s._v(" "),a("p",[s._v("我们删除容器，看主机上数据是否会被删除")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\nCONTAINER ID        IMAGE                                COMMAND                  CREATED             STATUS              PORTS                    NAMES\n3302e930a1a8        tomcat:8.5.27                        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" minutes       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8081-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat02\n749c02466301        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".91.166:5000/zzyyubuntu:1.2   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days ago          Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days                                    pedantic_gagarin\nad5ee6156b1c        registry                             "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/entrypoint.sh /etc…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days ago          Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:5000-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v("/tcp   competent_meninsky\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rm -f 3302e930a1a8")]),s._v("\n3302e930a1a8\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 aa 目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /opt/aa && ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntext2.txt  text.txt\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("说明没有删除。")]),s._v(" "),a("h3",{attrs:{id:"默认目录挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认目录挂载"}},[s._v("#")]),s._v(" 默认目录挂载")]),s._v(" "),a("p",[s._v("数据卷目录路径是固定的。")]),s._v(" "),a("p",[s._v("格式："),a("code",[s._v("docker run [options] -v <任意别名:容器内的路径[:ro | rw]> <镜像名>")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("任意别名:容器内的路径"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":ro "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("镜像名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("任意别名是一个数据卷名字，名字可以随便写，Docker 会在 "),a("code",[s._v("/var/lib/docker/volumes")]),s._v(" 目录下生成该数据卷，这是 docker 默认的数据卷目录。并且在数据卷里生成 "),a("code",[s._v("_data")]),s._v(" 目录用于与容器目录同步数据。")]),s._v(" "),a("p",[a("code",[s._v("ro")]),s._v("：代表 read-only，容器的路径只允许读，不允许写。不影响宿主机的路径可读可写")]),s._v(" "),a("p",[a("code",[s._v("rw")]),s._v("：默认值，代表可读可写")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 1：")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d -p 8080:8081 --name tomcat -v aa:/usr/local/tomcat/webapps tomcat:8.5.27")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 aa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# find / -name aa")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\n/var/lib/docker/volumes/aa\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入宿主机挂载")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/lib/docker/volumes/aa/_data\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ndocs  examples  host-manager  manager  ROOT\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("aa 代表一个数据卷名字，可以是任意，这相当于相对路径，它会在 "),a("code",[s._v("/var/lib/docker/volumes")]),s._v(" 下创建 aa 目录作为数据卷。")]),s._v(" "),a("p",[s._v("特点：容器的挂载目录内容覆盖到宿主机的挂载目录内容")]),s._v(" "),a("p",[s._v("其他例子和 "),a("a",{attrs:{href:"/project-management/Docker/Docker_data_volume#%E5%85%B7%E4%BD%93%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD"}},[s._v("具体目录挂载")]),s._v(" 一样。")]),s._v(" "),a("h3",{attrs:{id:"匿名目录挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#匿名目录挂载"}},[s._v("#")]),s._v(" 匿名目录挂载")]),s._v(" "),a("p",[s._v("没指定名字的挂载都是匿名挂载，-v 只写了容器内路径，并没写宿主机路径。")]),s._v(" "),a("p",[s._v("匿名目录挂载的目录是："),a("code",[s._v("/var/lib/docker/volumes/")]),s._v("，它会在这个目录生成匿名数据卷目录。")]),s._v(" "),a("p",[s._v("格式："),a("code",[s._v("docker run [options] -v <容器内的路径[:ro | rw]> <镜像名>")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("容器内的路径"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":ro "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("镜像名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("ro")]),s._v("：代表 read-only，容器的路径只允许读，不允许写。不影响宿主机的路径可读可写")]),s._v(" "),a("p",[a("code",[s._v("rw")]),s._v("：默认值，代表可读可写")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 1：匿名创建 tomcat3 容器，找到匿名的目录位置")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8081 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat03 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /usr/local/tomcat/webapps tomcat:8.5.27\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("创建容器时，没有指定宿主机的目录，那么它在哪呢？")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /var/lib/docker/volumes/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 volumes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n75b754f7602e8b946432ad871b0c4b43408dde92f06ce5574ff8352a85c39858\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("我们可以得知：没有指定宿主机目录，docker 会自动在 "),a("code",[s._v("/var/lib/docker/volumes")]),s._v(" 生成很长的字符串，这是什么呢？")]),s._v(" "),a("p",[s._v("这里透露 docker 数据卷操作命令："),a("code",[s._v("docker volume ls")]),s._v("，查看数据卷")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\nDRIVER    VOLUME NAME\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     75b754f7602e8b946432ad871b0c4b43408dde92f06ce5574ff8352a85c39858\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("可以看出匿名目录挂载生成的目录名就是 "),a("strong",[s._v("随机生成的数据卷名字")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"哪个挂载方法好"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#哪个挂载方法好"}},[s._v("#")]),s._v(" 哪个挂载方法好？")]),s._v(" "),a("p",[s._v("首先排除掉 "),a("strong",[s._v("匿名目录挂载")]),s._v("，它的缺点是不好维护，数据卷名随机生成且太长，不清楚目录挂载的是哪个容器。")]),s._v(" "),a("p",[a("strong",[s._v("默认目录挂载")]),s._v(" 指定了一个默认目录，无论挂载目录有多少，都集中在默认目录下管理。但是缺点是 "),a("strong",[s._v("不能指定文件挂载")]),s._v("，只能指定目录进行挂载。它和具体目录挂载的另一个区别是：第一次启动容器挂载时，"),a("strong",[s._v("容器的挂载目录内容会覆盖宿主机的挂载目录内容")]),s._v("。")]),s._v(" "),a("p",[a("strong",[s._v("具体目录挂载")]),s._v(" 可以指定宿主机的任意位置，但是一旦挂载目录多了起来，可能目录过于分散导致无法集中管理，但是它更加灵活，而且 "),a("strong",[s._v("能指定文件挂载")]),s._v("。值得注意的是：第一次启动容器挂载时，必须确保容器的挂载目录数据备份好，因为该挂载方式会将 "),a("strong",[s._v("宿主机的挂载目录内容覆盖掉容器的挂载目录内容")]),s._v("。所以，有数据则备份，再挂载。")]),s._v(" "),a("p",[s._v("总之："),a("strong",[s._v("匿名目录挂载")]),s._v(" 不推荐，根据需求选择 "),a("strong",[s._v("默认目录挂载")]),s._v(" 和 "),a("strong",[s._v("具体目录挂载")]),s._v("，前者不能挂载文件，挂载在默认目录；后者能挂载文件，且挂载在宿主机任意位置，但是会覆盖容器的挂载目录。我喜欢 "),a("strong",[s._v("具体目录挂载")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"读写权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#读写权限"}},[s._v("#")]),s._v(" 读写权限")]),s._v(" "),a("p",[s._v("三个挂载方式我都提到了读写的权限，这个读写权限仅针对 "),a("strong",[s._v("容器的挂载目录")]),s._v("，如果不指定权限，默认就是可读可写。")]),s._v(" "),a("p",[a("strong",[s._v("什么时候用到呢？")]),s._v(" 当我们希望只操作宿主机的挂载目录，然后同步给容器的挂载目录，但是不希望容器的挂载目录也能操作，影响宿主机的挂载目录。")]),s._v(" "),a("p",[s._v("拿默认目录挂载的命令格式来说："),a("code",[s._v("docker run [options] -v <任意别名:容器内的路径[:ro | rw]> <镜像名>")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("任意别名:容器内的路径"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":ro "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("镜像名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("ro")]),s._v("：代表 read-only，容器的路径只允许读，不允许写。不影响宿主机的路径可读可写")]),s._v(" "),a("p",[a("code",[s._v("rw")]),s._v("：默认值，代表可读可写")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 1：启动 tomcat04 容器，挂载到 kele 数据卷里，并赋予只读权限")])])]),s._v(" "),a("p",[s._v("为了方便，不指定端口映射，"),a("code",[s._v("-P")]),s._v("（大写）直接让 Docker 随机生成端口映射")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat04 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" frx:/usr/local/tomcat/webapps:ro tomcat:8.5.27\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看数据卷")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#返回结果")]),s._v("\nDRIVER              VOLUME NAME\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               75b754f7602e8b946432ad871b0c4b43408dde92f06ce5574ff8352a85c39858\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               frx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("strong",[s._v("宿主机操作")]),s._v("：找到 docker 的数据卷默认目录，进入 kele 目录下的 _data 目录，创建 test.txt 文件，测试读写权限")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 frx 目录下的 _data 目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /var/lib/docker/volumes/frx/_data/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 test.txt 文件，测试写权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch text.txt")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件，测试读权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls ")]),s._v("\ndocs  examples  host-manager  manager  ROOT  text.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("说明宿主机可读可写。如果不可写会报错。")]),s._v(" "),a("p",[a("strong",[s._v("容器操作：")]),s._v(" 进入 tomcat04 容器的挂载目录，测试读写权限")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 tomcat04 容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat04 bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入挂载目录")]),s._v("\nroot@83d20336795b:/usr/local/tomcat"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd webapps/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件，测试读权限")]),s._v("\nroot@83d20336795b:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\nROOT  docs  examples  host-manager  manager  text.txt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试写权限")]),s._v("\nroot@83d20336795b:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch text2.txt")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果，报错")]),s._v("\ntouch: cannot "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'text2.txt'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Read-only "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" system\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("11 和 17 行的结果告诉我们，无法执行写操作，只能执行读操作。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 2：")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 赋予读写权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat04 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" kele:/usr/local/tomcat/webapps:ro tomcat:8.5.27\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不写权限，默认赋予读写权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat04 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" kele:/usr/local/tomcat/webapps tomcat:8.5.27\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"数据卷操作命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷操作命令"}},[s._v("#")]),s._v(" 数据卷操作命令")]),s._v(" "),a("p",[s._v("数据卷在 Docker 称为 volume，所以相关命令都要有 volume。")]),s._v(" "),a("h3",{attrs:{id:"数据卷命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷命令"}},[s._v("#")]),s._v(" 数据卷命令")]),s._v(" "),a("p",[s._v("看注释：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\nUsage:  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume COMMAND\nManage volumes\nCommands:\n\n  create      Create a volume  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个数据卷")]),s._v("\n  inspect     Display detailed information on one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" volumes  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看数据卷的详细信息")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("          List volumes  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看所有数据卷列表")]),s._v("\n  prune       Remove all unused "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" volumes  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有未使用的数据卷")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("          Remove one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" volumes   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除指定的数据卷")]),s._v("\n  \nRun "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker volume COMMAND --help'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information on a command.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h3",{attrs:{id:"数据卷查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷查看"}},[s._v("#")]),s._v(" 数据卷查看")]),s._v(" "),a("p",[s._v("查看数据卷的命令已经在上面透露过了。")]),s._v(" "),a("p",[s._v("格式："),a("code",[s._v("docker volume ls")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("例子 1：")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume ls")]),s._v("\nDRIVER              VOLUME NAME\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               75b754f7602e8b946432ad871b0c4b43408dde92f06ce5574ff8352a85c39858\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               aa\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               frx\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"数据卷信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷信息"}},[s._v("#")]),s._v(" 数据卷信息")]),s._v(" "),a("p",[s._v("格式："),a("code",[s._v("docker volume inspect <数据卷名>")])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 1：查看 frx 数据卷的具体信息")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume ls")]),s._v("\nDRIVER              VOLUME NAME\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               75b754f7602e8b946432ad871b0c4b43408dde92f06ce5574ff8352a85c39858\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               aa\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               frx\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume inspect frx")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CreatedAt"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2022-09-18T22:19:07+08:00"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mountpoint"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/volumes/frx/_data"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"frx"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Options"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Scope"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"local"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"数据卷创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷创建"}},[s._v("#")]),s._v(" 数据卷创建")]),s._v(" "),a("p",[s._v("如果不想在启动容器的时候利用 "),a("code",[s._v("-v")]),s._v("「被迫」创建数据卷，这个命令让你收益实用。")]),s._v(" "),a("p",[s._v("格式："),a("code",[s._v("docker volumn create <数据卷名>")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volumn create "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("数据卷名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("例子 1：创建一个MyVolumn 数据卷")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume create MyVolume")]),s._v("\nMyVolume\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume ls")]),s._v("\nDRIVER              VOLUME NAME\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               75b754f7602e8b946432ad871b0c4b43408dde92f06ce5574ff8352a85c39858\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               aa\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               frx\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("               MyVolume\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("创建的数据卷目录依然在 "),a("code",[s._v("/var/lib/docker/volumes")]),s._v(" 下")]),s._v(" "),a("h3",{attrs:{id:"数据卷删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷删除"}},[s._v("#")]),s._v(" 数据卷删除")]),s._v(" "),a("p",[s._v("数据卷太多怎么办？可以删除指定名字的数据卷，也可以删除全部未被使用的数据卷。")]),s._v(" "),a("ul",[a("li",[s._v("删除指定名字的数据卷命令格式："),a("code",[s._v("docker rm <数据卷名>")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("数据卷名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("删除全部未被使用的数据卷命令格式："),a("code",[s._v("docker volume prune")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume prune\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("例子 1：删除 620fb .... 的数据卷")])])]),s._v(" "),a("p",[a("strong",[s._v("例子 1：删除 75b .... 的数据卷")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" 75b754f7602e8b946432ad871b0c4b43408dde92f06ce5574ff8352a85c39858\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("例子 2：删除所有未使用的数据卷")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume prune\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume prune")]),s._v("\nWARNING"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" This will remove all "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" volumes not used by at least one container.\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确认 y，取消 N")]),s._v("\nAre you sure you want to continue? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"数据卷容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据卷容器"}},[s._v("#")]),s._v(" 数据卷容器")]),s._v(" "),a("h3",{attrs:{id:"继承"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#继承"}},[s._v("#")]),s._v(" 继承")]),s._v(" "),a("p",[s._v("容器1完成和宿主机的映射")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--privileged")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /mydocker/u:/tmp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" u1 ubuntu\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it  --privileged=true -v /mydocker/u:/tmp --name u1 ubuntu")]),s._v("\nWARNING: IPv4 forwarding is disabled. Networking will not work.\nroot@a817d0f97c01:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /tmp/")]),s._v("\nroot@a817d0f97c01:/tmp"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -l")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nroot@a817d0f97c01:/tmp"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch u1_data.txt")]),s._v("\nroot@a817d0f97c01:/tmp"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -l")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" Sep "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":58 u1_data.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 _data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /mydocker/u/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/mydocker/u\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -l")]),s._v("\n总用量 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":58 u1_data.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("容器2继承容器1的卷规则")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--privileged")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true --volumes-from 父类 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" u2 ubuntu\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it  --privileged=true --volumes-from u1 --name u2 ubuntu")]),s._v("\nroot@9c23dc4755bd:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /tmp/")]),s._v("\nroot@9c23dc4755bd:/tmp"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nu1_data.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it  --privileged=true --volumes-from u1 --name u2 ubuntu")]),s._v("\nroot@9c23dc4755bd:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /tmp/")]),s._v("\nroot@9c23dc4755bd:/tmp"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nu1_data.txt\nroot@9c23dc4755bd:/tmp"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch u2_data.txt")]),s._v("\nroot@9c23dc4755bd:/tmp"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES\n9c23dc4755bd        ubuntu              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago       Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" seconds ago                       u2\n5d80a700eff5        ubuntu              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago       Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago                        u1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker start u1")]),s._v("\nu1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@frx01 u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it 5d80a700eff5 bash")]),s._v("\nroot@5d80a700eff5:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /tmp/")]),s._v("\nroot@5d80a700eff5:/tmp"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nu1_data.txt  u2_data.txt "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#u1中也有u2的")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h3",{attrs:{id:"数据共享"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据共享"}},[s._v("#")]),s._v(" 数据共享")]),s._v(" "),a("p",[s._v("上面讲述的是主机和容器之间共享数据，那么如何实现容器和容器之间的共享数据呢？那就是创建 "),a("strong",[s._v("创建数据卷容器")]),s._v("。")]),s._v(" "),a("p",[s._v("命名的容器挂载数据卷，其他容器通过挂载这个（父容器）实现数据共享，挂载数据卷的容器，称之为 "),a("strong",[s._v("数据卷容器(Data Volume Container)")]),s._v("。")]),s._v(" "),a("p",[s._v("通俗地来说，docker 容器数据卷可以看成使我们生活中常用的 U 盘，它存在于一个或多个的容器中，由 docker 挂载到容器，但不属于联合文件系统，Docker 不会在容器删除时删除其挂载的数据卷。在创建一个容器时候，使用命令绑定一个父容器，这个父容器就是 "),a("strong",[s._v("数据卷容器")]),s._v("。")]),s._v(" "),a("p",[s._v("特点：")]),s._v(" "),a("ul",[a("li",[s._v("数据卷可以在容器之间共享或重用数据")]),s._v(" "),a("li",[s._v("数据卷中的更改可以直接生效")]),s._v(" "),a("li",[s._v("数据卷中的更改不会包含在镜像的更新中")]),s._v(" "),a("li",[s._v("数据卷的生命周期一直持续到没有容器使用它为止")])]),s._v(" "),a("p",[s._v("命令格式："),a("code",[s._v("docker run --volumes-from <数据卷容器名> <镜像名[:TAG | ID]>")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --volumes-from "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("数据卷容器名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("镜像名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":TAG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("--volumes-from")]),s._v(" 可以多次使用来挂载多个容器里的多个数据卷。即该命令是 "),a("strong",[s._v("链式")]),s._v(" 的。")]),s._v(" "),a("p",[a("strong",[s._v("使用 --volumes-from 参数所挂载数据卷的容器自己并不需要保持在运行状态。")])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[a("code",[s._v("--volumes-from")]),s._v(" 后的容器名才是 "),a("strong",[s._v("数据卷容器")]),s._v("，并不是启动的这个容器。")])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 1：创建三个容器 tomcat10、tomcat11、tomcat12，其中 tomcat10 是数据卷容器")])])]),s._v(" "),a("p",[s._v("为了方便，不指定端口映射，"),a("code",[s._v("-P")]),s._v("（大写）直接让 Docker 随机生成端口映射。")]),s._v(" "),a("p",[s._v("创建数据卷容器的命令和创建容器的命令一样，创建 tomcat10 数据卷容器的时候指定一个数据卷。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\nREPOSITORY    TAG       IMAGE ID       CREATED       SIZE\ntomcat        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v(".73    7ec084df520c   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" days ago    249MB\nmysql         latest    b05128b000dd   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" days ago    516MB\nhello-world   latest    feb5d9fea6a5   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" weeks ago   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动镜像，创建容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat10 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" tomcat10:/usr/local/tomcat/webapps tomcat:8.5.73\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\nCONTAINER ID   IMAGE           COMMAND             CREATED          STATUS          PORTS                     NAMES\n5516f026bf78   tomcat:8.5.73   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" seconds ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" seconds   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:49155-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat10\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("创建 tomcat11 和 tomcat12 容器，绑定 tomcat10 容器，也就是绑定数据卷容器")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行两个命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat11 --volumes-from tomcat10 tomcat:8.5.73\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat12 --volumes-from tomcat10 tomcat:8.5.73\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\nCONTAINER ID   IMAGE           COMMAND             CREATED          STATUS          PORTS                     NAMES\n2cc6944ab955   tomcat:8.5.73   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" seconds ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" seconds   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:49157-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat12\n0bd657b306d3   tomcat:8.5.73   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),s._v(" seconds ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" seconds   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:49156-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat11\n5516f026bf78   tomcat:8.5.73   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" minutes ago    Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" minutes    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:49155-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat10\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("例子 2：证明三个容器的数据是否共享")])])]),s._v(" "),a("p",[a("strong",[s._v("例子 1")]),s._v(" 已经创建好三个容器，并且 tomcat10 容器的数据卷目录是 tomcat10。我们可以在 tomcat10 容器的 webapps 目录下创建一个 test.txt 文件，看看 tomcat11 容器和 tomcat12 容器的 webapps 是否同步数据。")]),s._v(" "),a("p",[s._v("首先进入 tomcat10 容器的 webapps 目录，创建 test.txt 文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 tomcat10 容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" tomcat10 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 webapps 目录")]),s._v("\nroot@f45ea598ee8d:/usr/local/tomcat"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd webapps")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 test.txt 文件")]),s._v("\nroot@f45ea598ee8d:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch test.txt")]),s._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("然后我们进入 tomcat11 容器，看文件是否同步过来，并且创建 test2.txt 文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 tomcat11 容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" tomcat11 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 webapps 目录")]),s._v("\nroot@31220638e2dc:/usr/local/tomcat"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd webapps")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 test.txt 文件")]),s._v("\nroot@31220638e2dc:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntest.txt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 test2.txt 文件")]),s._v("\nroot@31220638e2dc:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch test2.txt")]),s._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("然后我们进入 tomcat12 容器，看文件是否同步过来")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 tomcat12 容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" tomcat12 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入 webapps 目录")]),s._v("\nroot@31220638e2dc:/usr/local/tomcat"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd webapps")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建 test.txt 文件")]),s._v("\nroot@31220638e2dc:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntest2.txt  test.txt\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("我们可以知道，数据是实现了共享。只要 tomcat10 数据卷容器的更新内容，其他绑定的容器都会同步内容。")]),s._v(" "),a("p",[s._v("最后我们看看宿主机的挂载目录")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入宿主机挂载目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/lib/docker/volumes/tomcat10/_data\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntest2.txt  test.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("说明无论是 tomcat10 容器的挂载目录，还是映射的宿主机挂载目录，只要任意一个发生改变，绑定的普通容器也会发生改变，实现共享。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("笔记")]),s._v(" "),a("p",[s._v("普通容器绑定数据卷容器，其实就是绑定数据卷容器的数据卷。")]),s._v(" "),a("p",[s._v("所以删除 tomcat10 容器后 ，tomcat11 容器修改文件后， tomcat12 容器还可以正常共享数据，因为 tomcat10 容器的数据卷没有被删除。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting1@master/20220918/image.2zbxvbh9y2s0.webp",alt:"image"}})]),s._v(" "),a("p",[s._v("容器之间配置信息的传递，数据卷的生命周期一直持续到没有容器使用它为止。 存储在本机的文件则会一直保留。")]),s._v(" "),a("p",[a("strong",[s._v("如果删除了挂载的容器（包括 dbdata、db1 和 db2），数据卷并不会被自动删除。如果要删除一个数据卷，必须在删除最后一个还挂载着它的容器时使用 docker rm -v 命令来指定同时删除关联的容器。这可以让用户在容器之间升级和移动数据卷。")])]),s._v(" "),a("h3",{attrs:{id:"数据备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据备份"}},[s._v("#")]),s._v(" 数据备份")]),s._v(" "),a("p",[s._v("可以利用数据卷对其中的数据进行进行备份、恢复。")]),s._v(" "),a("p",[s._v("数据备份命令格式："),a("code",[s._v("docker run [options] --volumes-from <数据卷容器> [-v <宿主机绝对路径>:<随机路径>] <镜像名>:[TAG | ID] tar cvf <随机路径/备份名> <数据卷容器路径>")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --volumes-from "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("数据卷容器"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-v "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("宿主机绝对路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("随机路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("镜像名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TAG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" cvf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("随机路径/备份名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("数据卷容器路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("两个随机路径必须保持一致")]),s._v("。备份路径默认在 "),a("code",[s._v("/var/lib/docker/overlay2/")]),s._v(" 下的容器 ID 目录下生成。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 1：不指定宿主机挂载目录下和容器备份目录，备份 tomcat10 容器的数据卷 webapps 目录")])])]),s._v(" "),a("p",[s._v("这里是 tomcat10 容器，这个容器已经创建，并且容器的 "),a("code",[s._v("/usr/local/tomcat/webapps")]),s._v(" 有 test.txt 和 test2.txt 文件，具体步骤在 "),a("a",{attrs:{href:"/project-management/Docker/Docker_data_volume#%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"}},[s._v("数据共享")]),s._v(" 实现了。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat-backup --volumes-from tomcat10 tomcat:8.5.73 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" cvf /backup.tar /usr/local/tomcat/webapps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找备份的文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-name")]),s._v(" backup.tar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\n/var/lib/docker/overlay2/a9ef07977088b96970d926e95650a4810acf60429f9b9ca66625b6366597ff12/diff/backup.tar\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("容器启动后，使用了 tar 命令来将容器的 /usr/local/tomcat/webapps 目录备份到宿主机里，宿主机备份的路径看第 8 行数据，备份的文件是 backup.tar。")]),s._v(" "),a("p",[a("strong",[s._v("如果容器删除，那么该方式的备份文件也被删除，并且备份目录是容器 ID 命名，并非容器名，看一长串字符串就知道了。")])]),s._v(" "),a("p",[s._v("如果解决删除问题，以及想要指定的路径进行备，例子 2 方式可以解决。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 2：指定宿主机挂载目录下和容器备份目录，备份 tomcat10 容器的数据卷 webapps 目录")])])]),s._v(" "),a("p",[a("strong",[s._v("这种方式如果容器删除，备份文件不会被删除。")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --volumes-from tomcat10 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/backup:/backup tomcat:8.5.73 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" cvf /backup/backup.tar /usr/local/tomcat/webapps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找备份的文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-name")]),s._v(" backup.tar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\n/opt/backup/backup.tar\n/var/lib/docker/overlay2/a9ef07977088b96970d926e95650a4810acf60429f9b9ca66625b6366597ff12/diff/backup.tar\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("容器的挂载路径要和备份的文件路径保持一致，才能指定备份路径。否则如例子 3 报错：")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("例子 3：容器挂载路径和备份文件的路径不一致情况")])])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --volumes-from tomcat10 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/backup:/a tomcat:8.5.73 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" cvf /b/backup.tar /usr/local/tomcat/webapps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\ntar: /b/backup.tar: Cannot open: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\ntar: Error is not recoverable: exiting now\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("容器的挂载路径是 a，但是备份的路径是 b，所以报错了，如果路径保持一致：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除例子 2的备份文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /opt/backup.tar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --volumes-from tomcat10 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/backup:/a tomcat:8.5.73 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" cvf /a/backup.tar /usr/local/tomcat/webapps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找备份的文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-name")]),s._v(" backup.tar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回结果")]),s._v("\n/opt/backup/backup.tar\n/var/lib/docker/overlay2/a9ef07977088b96970d926e95650a4810acf60429f9b9ca66625b6366597ff12/diff/backup.tar\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("说明容器的挂载路径要和备份的文件路径保持一致，才能备份成功。建议使用路径 "),a("code",[s._v("/backup")]),s._v(" 。")]),s._v(" "),a("p",[s._v("原理：首先将宿主机和容器的目录进行挂载，实现连通，接着容器内压缩成备份文件到 "),a("code",[s._v("/a")]),s._v(" 目录下，实际上也会压缩到与 "),a("code",[s._v("/a")]),s._v(" 挂载的 "),a("code",[s._v("/opt/backup")]),s._v(" 目录下，所以这就是为什么将压缩文件的目录和宿主机的挂载目录保持一致，它们连通才能互相同步数据。")]),s._v(" "),a("h3",{attrs:{id:"数据恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据恢复"}},[s._v("#")]),s._v(" 数据恢复")]),s._v(" "),a("p",[s._v("备份了数据，那么就需要进行数据恢复。")]),s._v(" "),a("p",[s._v("恢复命令格式："),a("code",[s._v("docker run --volumes-from <恢复到哪个数据卷容器> [-v <宿主机绝对路径>:<随机路径>] <镜像名>[:TAG | ID] tar xvf <随机路径 | 路径>")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --volumes-from "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("恢复到哪个数据卷容器"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-v "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("宿主机绝对路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("随机路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("镜像名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":TAG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("随机路径 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 路径"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("例子 1：数据恢复到 tomcat20 容器的数据卷里")])])]),s._v(" "),a("p",[s._v("如果要恢复数据到 tomcat20 容器，首先创建一个带有数据卷的容器 tomcat20，因为只能恢复数据到数据卷里。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" tomcat20 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" tomcat20:/usr/local/tomcat/webapps tomcat:8.5.73\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后创建另一个容器，挂载 tomcat20 的容器，并使用 untar 解压备份文件到挂载的容器卷中。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --volumes-from tomcat20 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/backup:/backup tomcat:8.5.73 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf /backup/backup.tar "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-C")]),s._v(" /\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("-C /")]),s._v(" 代表解压到根目录下，因为压缩包的文件基于根目录的，否则解压的目录是基于 "),a("code",[s._v("/backup")]),s._v("。")]),s._v(" "),a("p",[s._v("原理：此时 tomcat20 挂载目录是 "),a("code",[s._v("/usr/local/tomcat/webapps")]),s._v("，而新的容器只要挂载了 tomcat20 容器，它们两个的 "),a("code",[s._v("/usr/local/tomcat/webapps")]),s._v(" 形成关联，新的容器的这个目录发生改变，则 tomcat20 的挂载目录也会发生改变，所以解压文件到新的容器的该目录下，实际上也是解压文件到 tomcat20 的挂载目录下，也就是实现恢复数据。")]),s._v(" "),a("h2",{attrs:{id:"挂载特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载特性"}},[s._v("#")]),s._v(" 挂载特性")]),s._v(" "),a("p",[s._v("关于到底是宿主机的挂载目录覆盖容器的挂载目录，还是反过来覆盖：")]),s._v(" "),a("ul",[a("li",[s._v("默认目录挂载：\n"),a("ul",[a("li",[s._v("当宿主机挂载目录已经存在时，双方挂载完成后，"),a("strong",[s._v("宿主机挂载目录覆盖容器挂载目录")])]),s._v(" "),a("li",[s._v("当宿主机挂载目录不存在时，双方挂载完成后，"),a("strong",[s._v("容器挂载目录覆盖宿主机挂载目录")])])])]),s._v(" "),a("li",[s._v("具体目录挂载\n"),a("ul",[a("li",[s._v("当宿主机挂载目录无论存不存在，双方挂载完成后，"),a("strong",[s._v("宿主机挂载目录都会覆盖容器挂载目录")])])])])]),s._v(" "),a("p",[a("strong",[s._v("默认目录挂载")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("宿主机")]),s._v(" "),a("th",[s._v("容器")]),s._v(" "),a("th",[s._v("运行结果")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("宿主机文件内容覆盖容器文件内容")])])]),s._v(" "),a("tr",[a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("宿主机目录内容覆盖容器目录内容")])])]),s._v(" "),a("tr",[a("td",[s._v("......")]),s._v(" "),a("td",[s._v("......")]),s._v(" "),a("td",[s._v("......")])]),s._v(" "),a("tr",[a("td",[s._v("文件不存在")]),s._v(" "),a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("容器文件内容覆盖宿主机文件内容")])])]),s._v(" "),a("tr",[a("td",[s._v("目录不存在")]),s._v(" "),a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("容器目录内容覆盖宿主机目录内容")])])]),s._v(" "),a("tr",[a("td",[s._v("......")]),s._v(" "),a("td",[s._v("......")]),s._v(" "),a("td",[s._v("......")])]),s._v(" "),a("tr",[a("td",[s._v("其他和 "),a("strong",[s._v("具体目录挂载")]),s._v(" 类似")]),s._v(" "),a("td"),s._v(" "),a("td")])])]),s._v(" "),a("p",[a("strong",[s._v("具体目录挂载")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("宿主机")]),s._v(" "),a("th",[s._v("容器")]),s._v(" "),a("th",[s._v("运行结果")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("宿主机文件内容覆盖容器文件内容")])])]),s._v(" "),a("tr",[a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("宿主机目录内容覆盖容器目录内容")])])]),s._v(" "),a("tr",[a("td",[s._v("------")]),s._v(" "),a("td",[s._v("------")]),s._v(" "),a("td",[s._v("------")])]),s._v(" "),a("tr",[a("td",[s._v("文件不存在")]),s._v(" "),a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("宿主机创建空文件，并覆盖掉容器的文件，导致也为空")])])]),s._v(" "),a("tr",[a("td",[s._v("目录不存在")]),s._v(" "),a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("宿主机创建空目录，并覆盖掉容器的文件，导致也为空")])])]),s._v(" "),a("tr",[a("td",[s._v("------")]),s._v(" "),a("td",[s._v("------")]),s._v(" "),a("td",[s._v("------")])]),s._v(" "),a("tr",[a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("文件不存在")]),s._v(" "),a("td",[s._v("挂载成功")])]),s._v(" "),a("tr",[a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("目录不存在")]),s._v(" "),a("td",[s._v("挂载成功")])]),s._v(" "),a("tr",[a("td",[s._v("------")]),s._v(" "),a("td",[s._v("------")]),s._v(" "),a("td",[s._v("------")])]),s._v(" "),a("tr",[a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("容器启动失败")])]),s._v(" "),a("tr",[a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("容器启动失败")])]),s._v(" "),a("tr",[a("td",[s._v("------")]),s._v(" "),a("td",[s._v("------")]),s._v(" "),a("td",[s._v("------")])]),s._v(" "),a("tr",[a("td",[s._v("目录不存在")]),s._v(" "),a("td",[s._v("目录不存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("Docker 会自动在宿主机和容器内新建目录")])])]),s._v(" "),a("tr",[a("td",[s._v("目录不存在")]),s._v(" "),a("td",[s._v("文件存在")]),s._v(" "),a("td",[s._v("容器启动失败")])]),s._v(" "),a("tr",[a("td",[s._v("目录不存在")]),s._v(" "),a("td",[s._v("目录存在")]),s._v(" "),a("td",[s._v("挂载成功，"),a("strong",[s._v("宿主机空目录内容覆盖容器内目录（空）")])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);