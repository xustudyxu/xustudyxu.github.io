(window.webpackJsonp=window.webpackJsonp||[]).push([[347],{693:function(t,s,a){"use strict";a.r(s);var v=a(10),r=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"linux-磁盘分区、挂载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux-磁盘分区、挂载"}},[t._v("#")]),t._v(" Linux 磁盘分区、挂载")]),t._v(" "),s("h2",{attrs:{id:"linux-分区"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux-分区"}},[t._v("#")]),t._v(" Linux 分区")]),t._v(" "),s("h3",{attrs:{id:"原理介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理介绍"}},[t._v("#")]),t._v(" 原理介绍")]),t._v(" "),s("ol",[s("li",[t._v("Linux 来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构, Linux中每个分区都是用来组成整个文件系统的一部分。")]),t._v(" "),s("li",[t._v("Linux 采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。")]),t._v(" "),s("li",[t._v("示意图")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/01.png",alt:"01"}})]),t._v(" "),s("h3",{attrs:{id:"硬盘说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#硬盘说明"}},[t._v("#")]),t._v(" 硬盘说明")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Linux硬盘分IDE硬盘和SCSI硬盘，目前基本上是SCSI 硬盘")])]),t._v(" "),s("li",[s("strong",[t._v('对于IDE硬盘，驱动器标识符为“hdx~”,其中"hd"表明分区所在设备的类型，这里是指IDE硬盘了。"x”为盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘）,~”代表分区，前四个分区用数字1到4表示，它们是主分区或扩展分区，从5开始就是逻辑分区。例，hda3表示为第一个IDE硬盘上的第三个主分区或扩展分区,hdb2表示为第二个IDE硬盘上的第二个主分区或扩展分区')]),t._v("。")]),t._v(" "),s("li",[s("strong",[t._v('对于SCSI硬盘则标识为“sdx~"，SCSI硬盘是用"sd"来表示分区所在设备的类型的，其余则和IDE硬盘的表示方法一样')])])]),t._v(" "),s("h3",{attrs:{id:"查看所有设备挂载情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看所有设备挂载情况"}},[t._v("#")]),t._v(" 查看所有设备挂载情况")]),t._v(" "),s("p",[t._v("命令:"),s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("lsblk 或者 lsblk -f")])],1),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/02.png",alt:"02"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/03.png",alt:"03"}})]),t._v(" "),s("h2",{attrs:{id:"挂载的经典案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#挂载的经典案例"}},[t._v("#")]),t._v(" 挂载的经典案例")]),t._v(" "),s("h3",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[t._v("#")]),t._v(" 说明")]),t._v(" "),s("p",[t._v("下面我们以"),s("strong",[t._v("增加一块硬盘")]),t._v("为例来熟悉下磁盘的相关指令和深入理解磁盘分区、挂载、卸载的概念。")]),t._v(" "),s("h3",{attrs:{id:"如何增加一块硬盘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何增加一块硬盘"}},[t._v("#")]),t._v(" 如何增加一块硬盘")]),t._v(" "),s("ol",[s("li",[t._v("虚拟机添加硬盘")]),t._v(" "),s("li",[t._v("分区")]),t._v(" "),s("li",[t._v("格式化")]),t._v(" "),s("li",[t._v("挂载")]),t._v(" "),s("li",[t._v("设置可以自动挂载")])]),t._v(" "),s("h3",{attrs:{id:"虚拟机增加硬盘步骤1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机增加硬盘步骤1"}},[t._v("#")]),t._v(" 虚拟机增加硬盘步骤1")]),t._v(" "),s("p",[t._v("在【虚拟机】菜单中，选择【设置】，然后设备列表里添加硬盘，然后一路【下一步】，中间只有选择磁盘大小的地方需要修改，至到完成。然后重启系统（才能识别）!")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/04.png",alt:"04"}})]),t._v(" "),s("h3",{attrs:{id:"虚拟机增加硬盘步骤2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机增加硬盘步骤2"}},[t._v("#")]),t._v(" 虚拟机增加硬盘步骤2")]),t._v(" "),s("ul",[s("li",[t._v("分区命令  "),s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("fdisk  /dev/sdb")])],1)]),t._v(" "),s("p",[t._v("开始对/sdb分区")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("选项")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("m")]),t._v(" "),s("td",[t._v("显示命令列表")])]),t._v(" "),s("tr",[s("td",[t._v("p")]),t._v(" "),s("td",[t._v("显示磁盘分区同 fdisk -l")])]),t._v(" "),s("tr",[s("td",[t._v("n")]),t._v(" "),s("td",[t._v("新增分区")])]),t._v(" "),s("tr",[s("td",[t._v("d")]),t._v(" "),s("td",[t._v("删除分区")])]),t._v(" "),s("tr",[s("td",[t._v("w")]),t._v(" "),s("td",[t._v("写入并退出")])])])]),t._v(" "),s("ul",[s("li",[t._v("说明:"),s("strong",[t._v("开始分区后输入n，新增分区，然后选择p，分区类型为主分区。两次回车默认剩余全部空间。最后输入w写入分区并退出，若不保存退出输入q")]),t._v("。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/05.png",alt:"05"}})]),t._v(" "),s("h3",{attrs:{id:"虚拟机增加硬盘步骤3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机增加硬盘步骤3"}},[t._v("#")]),t._v(" 虚拟机增加硬盘步骤3")]),t._v(" "),s("ul",[s("li",[t._v("格式化磁盘")])]),t._v(" "),s("p",[t._v("分区命令:"),s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("mkfs -t ext4 /dev/sdb1")])],1),t._v(" "),s("p",[t._v("其中ext4是分区类型")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/06.png",alt:"06"}})]),t._v(" "),s("h3",{attrs:{id:"虚拟机增加硬盘步骤4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机增加硬盘步骤4"}},[t._v("#")]),t._v(" 虚拟机增加硬盘步骤4")]),t._v(" "),s("ul",[s("li",[t._v("挂载:将一个分区与一个目录联系起来")])]),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("mount   设备名称  挂载目录")])],1),t._v(" "),s("p",[t._v("例如：mount\t/dev/sdbl    /newdisk/  (newdisk必须存在)")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/07.png",alt:"07"}})]),t._v(" "),s("ul",[s("li",[t._v("如果不想使用挂载，删除挂载点")])]),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("umount 设备名称 或者 挂载目录")])],1),t._v(" "),s("p",[t._v("例如: umount /dev/sdb1 或者 umont   /newdisk")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/08.png",alt:"08"}})]),t._v(" "),s("h3",{attrs:{id:"虚拟机增加硬盘步骤5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机增加硬盘步骤5"}},[t._v("#")]),t._v(" 虚拟机增加硬盘步骤5")]),t._v(" "),s("p",[t._v("永久挂载:"),s("strong",[t._v("通过修改/etc/fstab 实现挂载")])]),t._v(" "),s("p",[t._v("添加完成保存后执行"),s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("mount -a或者reboot")]),t._v("即刻生效")],1),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/09.png",alt:"09"}})]),t._v(" "),s("p",[t._v("执行reboot后：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/10.png",alt:"10"}})]),t._v(" "),s("h2",{attrs:{id:"磁盘情况查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#磁盘情况查询"}},[t._v("#")]),t._v(" 磁盘情况查询")]),t._v(" "),s("h3",{attrs:{id:"查询系统整体磁盘使用情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询系统整体磁盘使用情况"}},[t._v("#")]),t._v(" 查询系统整体磁盘使用情况")]),t._v(" "),s("p",[t._v("基本语法: "),s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("df -h")])],1),t._v(" "),s("ul",[s("li",[t._v("应用实例:查询系统整体磁盘使用情况")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/11.png",alt:"11"}})]),t._v(" "),s("h3",{attrs:{id:"查询指定目录的磁盘占用情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询指定目录的磁盘占用情况"}},[t._v("#")]),t._v(" 查询指定目录的磁盘占用情况")]),t._v(" "),s("p",[t._v("基本语法: "),s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("du -h")])],1),t._v(" "),s("ul",[s("li",[t._v("查询指定目录的磁盘占用情况，默认为当前目录")])]),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("-s 指定目录占用大小汇总")])],1),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("-h 带计量单位")])],1),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("-a 含文件")])],1),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("--max-depth=1 子目录深度")])],1),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v("-c 列出明细的同时，增加汇总值")])],1),t._v(" "),s("ul",[s("li",[t._v("应用实例:查询 /opt 目录的磁盘占用情况，深度为1")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/12.png",alt:"12"}})]),t._v(" "),s("h2",{attrs:{id:"磁盘情况-工作使用指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#磁盘情况-工作使用指令"}},[t._v("#")]),t._v(" 磁盘情况-工作使用指令")]),t._v(" "),s("p",[t._v("统计/opt文件夹下文件的个数")]),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v('ls -l /opt | grep "^-" | wc -l')])],1),t._v(" "),s("blockquote",[s("ol",[s("li",[t._v("列出opt下面的内容")]),t._v(" "),s("li",[t._v('交给管道grep过滤，"^-":正则表达式')]),t._v(" "),s("li",[t._v("把得到的结果用wc统计")])])]),t._v(" "),s("p",[t._v("统计/opt文件夹下目录的个数")]),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v('ls -l /opt | grep "d" | wc -l')])],1),t._v(" "),s("p",[t._v("统计/opt文件夹下文件的个数，包括子文件夹里的")]),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v('ls -lR /opt | grep "^-" |wc -l')])],1),t._v(" "),s("p",[t._v("统计/opt文件夹下目录的个数，包括子文件夹里的")]),t._v(" "),s("p",[s("font",{attrs:{color:"#DC4040",size:"4",face:"黑体"}},[t._v('ls -lR /opt | grep "^d" | wc -l')])],1),t._v(" "),s("p",[t._v("以树状显示目录结构 tree目录﹐注意，如果没有tree ,则使用yum install tree安装")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://jsdelivr.codeqihan.com//gh/xustudyxu/image-hosting@master/studynotes/Linux/images/10/13.png",alt:"13"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);